(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,29096,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(92199),s=e.i(46932),i=e.i(88653),o=e.i(55613),n=e.i(5766);let l=["conservative","moderate","aggressive"],d=["low","medium","high"];function c({strategyId:e,onClose:i,onSuccess:c}){let[x,p]=(0,t.useState)({name:"",entryLogic:"",confirmationStyle:"moderate",riskStyle:"medium",notes:""}),[g,u]=(0,t.useState)(!1),y=async r=>{if(r.preventDefault(),!x.name.trim()||!x.entryLogic.trim())return void n.default.error("Name and entry logic are required");u(!0);try{let r=await fetch(`/api/strategies/${e}/entry-models`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x.name.trim(),entryLogic:x.entryLogic.trim(),confirmationStyle:x.confirmationStyle,riskStyle:x.riskStyle,notes:x.notes.trim()||void 0})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to create entry model")}c()}catch(e){console.error("Error creating entry model:",e),n.default.error(e instanceof Error?e.message:"Failed to create entry model")}finally{u(!1)}};return(0,r.jsx)(o.default,{open:!0,onClose:i,children:(0,r.jsxs)(s.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{background:"var(--background)",borderRadius:"12px",boxShadow:"var(--shadow-lg)",maxWidth:"800px",width:"100%",margin:"0 16px",maxHeight:"90vh",overflowY:"auto"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"24px",borderBottom:"1px solid var(--border)"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,r.jsx)("div",{style:{width:"40px",height:"40px",background:"var(--accent-bg)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(a.FiTarget,{style:{width:"20px",height:"20px",color:"var(--accent-color)"}})}),(0,r.jsx)("h2",{style:{fontSize:"20px",fontWeight:"600",color:"var(--text-primary)",margin:"0"},children:"Create Entry Model"})]}),(0,r.jsx)("button",{onClick:i,style:{padding:"8px",background:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="var(--hover-bg)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:(0,r.jsx)(a.FiX,{style:{width:"20px",height:"20px"}})})]}),(0,r.jsxs)("form",{onSubmit:y,style:{padding:"24px",display:"flex",flexDirection:"column",gap:"24px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"8px"},children:"Model Name *"}),(0,r.jsx)("input",{type:"text",value:x.name,onChange:e=>p(r=>({...r,name:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--card-bg)",color:"var(--text-primary)",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.currentTarget.style.borderColor="var(--accent-color)",onBlur:e=>e.currentTarget.style.borderColor="var(--border)",placeholder:"e.g., Breakout Entry with Volume Confirmation",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"8px"},children:"Entry Logic *"}),(0,r.jsx)("textarea",{value:x.entryLogic,onChange:e=>p(r=>({...r,entryLogic:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--card-bg)",color:"var(--text-primary)",fontSize:"14px",resize:"none",outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.currentTarget.style.borderColor="var(--accent-color)",onBlur:e=>e.currentTarget.style.borderColor="var(--border)",rows:4,placeholder:"Describe the specific conditions and logic for entering trades...",required:!0}),(0,r.jsx)("p",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:"Be specific about price action, indicators, volume requirements, etc."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"12px"},children:"Confirmation Style"}),(0,r.jsx)("div",{style:{display:"flex",gap:"12px"},children:l.map(e=>(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)("input",{type:"radio",name:"confirmationStyle",value:e,checked:x.confirmationStyle===e,onChange:e=>p(r=>({...r,confirmationStyle:e.target.value})),style:{position:"absolute",opacity:0,pointerEvents:"none"}}),(0,r.jsx)("span",{style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid var(--border)",cursor:"pointer",transition:"all 0.2s",textTransform:"capitalize",background:x.confirmationStyle===e?"var(--accent-color)":"var(--card-bg)",color:x.confirmationStyle===e?"white":"var(--text-primary)",fontSize:"14px",fontWeight:"500"},children:e})]},e))}),(0,r.jsxs)("p",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px",lineHeight:"1.4"},children:["Conservative: Multiple confirmations required",(0,r.jsx)("br",{}),"Moderate: Standard confirmation signals",(0,r.jsx)("br",{}),"Aggressive: Quick entries with minimal confirmation"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"12px"},children:"Risk Style"}),(0,r.jsx)("div",{style:{display:"flex",gap:"12px"},children:d.map(e=>(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)("input",{type:"radio",name:"riskStyle",value:e,checked:x.riskStyle===e,onChange:e=>p(r=>({...r,riskStyle:e.target.value})),style:{position:"absolute",opacity:0,pointerEvents:"none"}}),(0,r.jsx)("span",{style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid var(--border)",cursor:"pointer",transition:"all 0.2s",textTransform:"capitalize",background:x.riskStyle===e?"#ea580c":"var(--card-bg)",color:x.riskStyle===e?"white":"var(--text-primary)",fontSize:"14px",fontWeight:"500"},children:e})]},e))}),(0,r.jsxs)("p",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px",lineHeight:"1.4"},children:["Low: Conservative position sizing",(0,r.jsx)("br",{}),"Medium: Balanced risk-reward approach",(0,r.jsx)("br",{}),"High: Aggressive position sizing for higher potential returns"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"8px"},children:"Additional Notes"}),(0,r.jsx)("textarea",{value:x.notes,onChange:e=>p(r=>({...r,notes:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--card-bg)",color:"var(--text-primary)",fontSize:"14px",resize:"none",outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.currentTarget.style.borderColor="var(--accent-color)",onBlur:e=>e.currentTarget.style.borderColor="var(--border)",rows:3,placeholder:"Any additional notes or considerations..."})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[(0,r.jsx)("button",{type:"button",onClick:i,style:{padding:"8px 16px",background:"transparent",border:"none",borderRadius:"6px",color:"var(--text-secondary)",cursor:"pointer",fontSize:"14px",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="var(--hover-bg)",onMouseLeave:e=>e.currentTarget.style.background="transparent",disabled:g,children:"Cancel"}),(0,r.jsxs)(s.motion.button,{type:"submit",disabled:g,whileHover:{scale:1.02},whileTap:{scale:.98},style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 24px",background:g?"var(--disabled-bg)":"var(--accent-color)",border:"none",borderRadius:"6px",color:"white",cursor:g?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s",boxShadow:"var(--shadow-md)"},onMouseEnter:e=>{g||(e.currentTarget.style.background="var(--accent-hover)")},onMouseLeave:e=>{g||(e.currentTarget.style.background="var(--accent-color)")},children:[(0,r.jsx)(a.FiSave,{style:{width:"16px",height:"16px"}}),g?"Creating...":"Create Model"]})]})]})]})})}function x({strategyId:e,onUpdate:i}){let[o,l]=(0,t.useState)([]),[d,x]=(0,t.useState)(!0),[p,g]=(0,t.useState)(!1),u=async()=>{try{let r=await fetch(`/api/strategies/${e}/entry-models`);if(!r.ok)throw Error("Failed to fetch entry models");let t=await r.json();l(t)}catch(e){console.error("Error fetching entry models:",e),n.default.error("Failed to load entry models")}finally{x(!1)}};(0,t.useEffect)(()=>{u()},[e]);let y=async r=>{if(confirm("Are you sure you want to delete this entry model?"))try{if(!(await fetch(`/api/strategies/${e}/entry-models/${r}`,{method:"DELETE"})).ok)throw Error("Failed to delete entry model");l(e=>e.filter(e=>e.id!==r)),n.default.success("Entry model deleted successfully")}catch(e){console.error("Error deleting entry model:",e),n.default.error("Failed to delete entry model")}};return d?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"h-32 bg-gray-200 rounded-lg"},t))})}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Entry Models"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Define how you enter trades within this strategy"})]}),(0,r.jsxs)(s.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-200 shadow-lg",children:[(0,r.jsx)(a.FiPlus,{className:"w-4 h-4"}),"Add Model"]})]}),0===o.length?(0,r.jsxs)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(a.FiTarget,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No entry models yet"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first entry model to define how you enter trades."}),(0,r.jsx)(s.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-200 shadow-lg",children:"Create First Model"})]}):(0,r.jsx)("div",{className:"space-y-4",children:o.map((e,t)=>(0,r.jsxs)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.name}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e.toLowerCase()){case"conservative":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"moderate":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"aggressive":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}})(e.confirmationStyle)}`,children:e.confirmationStyle}),(0,r.jsxs)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e.toLowerCase()){case"low":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"medium":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}})(e.riskStyle)}`,children:[e.riskStyle," Risk"]})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Entry Logic"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:e.entryLogic})]}),e.notes&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.notes})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,r.jsx)("button",{onClick:()=>{},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Edit model",children:(0,r.jsx)(a.FiEdit3,{className:"w-4 h-4 text-gray-500"})}),(0,r.jsx)("button",{onClick:()=>y(e.id),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete model",children:(0,r.jsx)(a.FiTrash2,{className:"w-4 h-4 text-red-500"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("span",{children:["Created ",new Date(e.createdAt).toLocaleDateString()]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(a.FiShield,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:e.confirmationStyle})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(a.FiTrendingUp,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:e.riskStyle})]})]})]})]},e.id))}),p&&(0,r.jsx)(c,{strategyId:e,onClose:()=>g(!1),onSuccess:()=>{g(!1),u(),n.default.success("Entry model created successfully")}})]})}let p=["1m","5m","15m","30m","1h","4h","Daily","Weekly"];function g({strategyId:e,onClose:i,onSuccess:l}){let[d,c]=(0,t.useState)({name:"",description:""}),[x,g]=(0,t.useState)([{timeframe:"Daily",description:"Trend direction and key levels"},{timeframe:"4h",description:"Entry timing and momentum"},{timeframe:"1h",description:"Precise entry and stop placement"}]),[u,y]=(0,t.useState)(!1),m=(e,r,t)=>{g(a=>a.map((a,s)=>s===e?{...a,[r]:t}:a))},h=(e,r)=>{let t="up"===r?e-1:e+1;t<0||t>=x.length||g(r=>{let a=[...r];return[a[e],a[t]]=[a[t],a[e]],a})},b=async r=>{if(r.preventDefault(),!d.name.trim())return void n.default.error("Sequence name is required");if(0===x.length)return void n.default.error("At least one timeframe step is required");if(x.some(e=>!e.timeframe.trim()))return void n.default.error("All timeframe steps must have a timeframe selected");y(!0);try{let r=await fetch(`/api/strategies/${e}/sequences`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d.name.trim(),description:d.description.trim()||void 0,steps:x.map((e,r)=>({timeframe:e.timeframe.trim(),orderIndex:r,description:e.description.trim()||void 0}))})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to create sequence")}l()}catch(e){console.error("Error creating sequence:",e),n.default.error(e instanceof Error?e.message:"Failed to create sequence")}finally{y(!1)}};return(0,r.jsx)(o.default,{open:!0,onClose:i,children:(0,r.jsxs)(s.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{background:"var(--background)",borderRadius:"12px",boxShadow:"var(--shadow-lg)",maxWidth:"1000px",width:"100%",margin:"0 16px",maxHeight:"90vh",overflowY:"auto"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"24px",borderBottom:"1px solid var(--border)"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,r.jsx)("div",{style:{width:"40px",height:"40px",background:"#ea580c",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(a.FiSettings,{style:{width:"20px",height:"20px",color:"white"}})}),(0,r.jsx)("h2",{style:{fontSize:"20px",fontWeight:"600",color:"var(--text-primary)",margin:"0"},children:"Create Timeframe Sequence"})]}),(0,r.jsx)("button",{onClick:i,style:{padding:"8px",background:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="var(--hover-bg)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:(0,r.jsx)(a.FiX,{style:{width:"20px",height:"20px"}})})]}),(0,r.jsxs)("form",{onSubmit:b,style:{padding:"24px",display:"flex",flexDirection:"column",gap:"24px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"8px"},children:"Sequence Name *"}),(0,r.jsx)("input",{type:"text",value:d.name,onChange:e=>c(r=>({...r,name:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--card-bg)",color:"var(--text-primary)",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.currentTarget.style.borderColor="#ea580c",onBlur:e=>e.currentTarget.style.borderColor="var(--border)",placeholder:"e.g., London Breakout Analysis Sequence",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"8px"},children:"Description"}),(0,r.jsx)("textarea",{value:d.description,onChange:e=>c(r=>({...r,description:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--card-bg)",color:"var(--text-primary)",fontSize:"14px",resize:"none",outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.currentTarget.style.borderColor="#ea580c",onBlur:e=>e.currentTarget.style.borderColor="var(--border)",rows:3,placeholder:"Describe the purpose and methodology of this sequence..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)"},children:"Analysis Steps *"}),(0,r.jsxs)("button",{type:"button",onClick:()=>{g(e=>[...e,{timeframe:"1h",description:""}])},style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",background:"#fed7aa",border:"none",borderRadius:"6px",color:"#9a3412",cursor:"pointer",fontSize:"14px",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="#fdba74",onMouseLeave:e=>e.currentTarget.style.background="#fed7aa",children:[(0,r.jsx)(a.FiPlus,{style:{width:"12px",height:"12px"}}),"Add Step"]})]}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:x.map((e,t)=>(0,r.jsxs)(s.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"var(--card-bg)",borderRadius:"8px"},children:[(0,r.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(0,r.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",background:"#ea580c",color:"white",fontSize:"14px",fontWeight:"bold",borderRadius:"50%"},children:t+1})}),(0,r.jsxs)("div",{style:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"var(--text-secondary)",marginBottom:"4px"},children:"Timeframe"}),(0,r.jsx)("select",{value:e.timeframe,onChange:e=>m(t,"timeframe",e.target.value),style:{width:"100%",padding:"6px 8px",border:"1px solid var(--border)",borderRadius:"4px",background:"var(--card-bg)",color:"var(--text-primary)",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.currentTarget.style.borderColor="#ea580c",onBlur:e=>e.currentTarget.style.borderColor="var(--border)",children:p.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",color:"var(--text-secondary)",marginBottom:"4px"},children:"Description"}),(0,r.jsx)("input",{type:"text",value:e.description,onChange:e=>m(t,"description",e.target.value),style:{width:"100%",padding:"6px 8px",border:"1px solid var(--border)",borderRadius:"4px",background:"var(--card-bg)",color:"var(--text-primary)",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.currentTarget.style.borderColor="#ea580c",onBlur:e=>e.currentTarget.style.borderColor="var(--border)",placeholder:"What to analyze at this timeframe"})]})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,r.jsx)("button",{type:"button",onClick:()=>h(t,"up"),disabled:0===t,style:{padding:"4px",background:"transparent",border:"none",borderRadius:"4px",cursor:0===t?"not-allowed":"pointer",color:"var(--text-secondary)",opacity:0===t?.5:1,transition:"background 0.2s"},onMouseEnter:e=>{0!==t&&(e.currentTarget.style.background="var(--hover-bg)")},onMouseLeave:e=>e.currentTarget.style.background="transparent",title:"Move up",children:"↑"}),(0,r.jsx)("button",{type:"button",onClick:()=>h(t,"down"),disabled:t===x.length-1,style:{padding:"4px",background:"transparent",border:"none",borderRadius:"4px",cursor:t===x.length-1?"not-allowed":"pointer",color:"var(--text-secondary)",opacity:t===x.length-1?.5:1,transition:"background 0.2s"},onMouseEnter:e=>{t!==x.length-1&&(e.currentTarget.style.background="var(--hover-bg)")},onMouseLeave:e=>e.currentTarget.style.background="transparent",title:"Move down",children:"↓"}),(0,r.jsx)("button",{type:"button",onClick:()=>{g(e=>e.filter((e,r)=>r!==t))},disabled:1===x.length,style:{padding:"4px",background:"transparent",border:"none",borderRadius:"4px",cursor:1===x.length?"not-allowed":"pointer",color:"#dc2626",opacity:1===x.length?.5:1,transition:"background 0.2s"},onMouseEnter:e=>{1!==x.length&&(e.currentTarget.style.background="#fef2f2")},onMouseLeave:e=>e.currentTarget.style.background="transparent",title:"Remove step",children:(0,r.jsx)(a.FiTrash2,{style:{width:"12px",height:"12px"}})})]})]},t))}),(0,r.jsx)("p",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"8px"},children:"Define the order of timeframes you analyze, from highest to lowest timeframe. Start with broader context and move to precise entry timing."})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[(0,r.jsx)("button",{type:"button",onClick:i,style:{padding:"8px 16px",background:"transparent",border:"none",borderRadius:"6px",color:"var(--text-secondary)",cursor:"pointer",fontSize:"14px",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="var(--hover-bg)",onMouseLeave:e=>e.currentTarget.style.background="transparent",disabled:u,children:"Cancel"}),(0,r.jsxs)(s.motion.button,{type:"submit",disabled:u,whileHover:{scale:1.02},whileTap:{scale:.98},style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 24px",background:u?"var(--disabled-bg)":"#ea580c",border:"none",borderRadius:"6px",color:"white",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s",boxShadow:"var(--shadow-md)"},onMouseEnter:e=>{u||(e.currentTarget.style.background="#c2410c")},onMouseLeave:e=>{u||(e.currentTarget.style.background="#ea580c")},children:[(0,r.jsx)(a.FiSave,{style:{width:"16px",height:"16px"}}),u?"Creating...":"Create Sequence"]})]})]})]})})}function u({strategyId:e,onUpdate:i}){let[o,l]=(0,t.useState)([]),[d,c]=(0,t.useState)(!0),[x,p]=(0,t.useState)(!1),u=async()=>{try{let r=await fetch(`/api/strategies/${e}/sequences`);if(!r.ok)throw Error("Failed to fetch sequences");let t=await r.json();l(t)}catch(e){console.error("Error fetching sequences:",e),n.default.error("Failed to load sequences")}finally{c(!1)}};(0,t.useEffect)(()=>{u()},[e]);let y=async r=>{if(confirm("Are you sure you want to delete this sequence? This will also delete all associated steps."))try{if(!(await fetch(`/api/strategies/${e}/sequences/${r}`,{method:"DELETE"})).ok)throw Error("Failed to delete sequence");l(e=>e.filter(e=>e.id!==r)),n.default.success("Sequence deleted successfully")}catch(e){console.error("Error deleting sequence:",e),n.default.error("Failed to delete sequence")}};return d?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"h-40 bg-gray-200 rounded-lg"},t))})}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Timeframe Sequences"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Define the order of timeframes you analyze for trade entries"})]}),(0,r.jsxs)(s.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition-all duration-200 shadow-lg",children:[(0,r.jsx)(a.FiPlus,{className:"w-4 h-4"}),"Add Sequence"]})]}),0===o.length?(0,r.jsxs)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(a.FiSettings,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No sequences yet"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create timeframe sequences to structure your multi-timeframe analysis."}),(0,r.jsx)(s.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p(!0),className:"px-6 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition-all duration-200 shadow-lg",children:"Create First Sequence"})]}):(0,r.jsx)("div",{className:"space-y-6",children:o.map((e,t)=>(0,r.jsxs)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.name}),(0,r.jsxs)("span",{className:"px-2 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-400 text-xs font-medium rounded",children:[e.steps.length," steps"]})]}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:e.description})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,r.jsx)("button",{onClick:()=>{},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Edit sequence",children:(0,r.jsx)(a.FiEdit3,{className:"w-4 h-4 text-gray-500"})}),(0,r.jsx)("button",{onClick:()=>y(e.id),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete sequence",children:(0,r.jsx)(a.FiTrash2,{className:"w-4 h-4 text-red-500"})})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[(0,r.jsx)(a.FiClock,{className:"w-4 h-4"}),"Analysis Sequence"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-3",children:e.steps.sort((e,r)=>e.orderIndex-r.orderIndex).map((e,t)=>{let a;return(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg px-3 py-2",children:[(0,r.jsx)("span",{className:"flex items-center justify-center w-6 h-6 bg-orange-600 text-white text-xs font-bold rounded-full",children:t+1}),(0,r.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${(a=e.timeframe.toLowerCase()).includes("1m")||a.includes("5m")?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":a.includes("15m")||a.includes("30m")||a.includes("1h")?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":a.includes("4h")||a.includes("daily")?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:e.timeframe}),e.description&&(0,r.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 max-w-32 truncate",children:e.description})]},e.id)})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("span",{children:["Created ",new Date(e.createdAt).toLocaleDateString()]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(a.FiTrendingUp,{className:"w-3 h-3"}),(0,r.jsxs)("span",{children:[e.steps.length," timeframes"]})]})]})]},e.id))}),x&&(0,r.jsx)(g,{strategyId:e,onClose:()=>p(!1),onSuccess:()=>{p(!1),u(),n.default.success("Sequence created successfully")}})]})}let y=["entry","exit","risk","discipline"],m=["low","medium","high","critical"];function h({strategyId:e,onClose:i,onSuccess:l}){let[d,c]=(0,t.useState)({name:"",description:"",category:"entry",severity:"medium",isActive:!0}),[x,p]=(0,t.useState)(!1),g=async r=>{if(r.preventDefault(),!d.name.trim()||!d.description.trim())return void n.default.error("Name and description are required");p(!0);try{let r=await fetch(`/api/strategies/${e}/rules`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d.name.trim(),description:d.description.trim(),category:d.category,severity:d.severity,isActive:d.isActive})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to create rule")}l()}catch(e){console.error("Error creating rule:",e),n.default.error(e instanceof Error?e.message:"Failed to create rule")}finally{p(!1)}};return(0,r.jsx)(o.default,{open:!0,onClose:i,children:(0,r.jsxs)(s.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{background:"var(--background)",borderRadius:"12px",boxShadow:"var(--shadow-lg)",maxWidth:"800px",width:"100%",margin:"0 16px",maxHeight:"90vh",overflowY:"auto"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"24px",borderBottom:"1px solid var(--border)"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,r.jsx)("div",{style:{width:"40px",height:"40px",background:"#dc2626",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(a.FiBookOpen,{style:{width:"20px",height:"20px",color:"white"}})}),(0,r.jsx)("h2",{style:{fontSize:"20px",fontWeight:"600",color:"var(--text-primary)",margin:"0"},children:"Create Strategy Rule"})]}),(0,r.jsx)("button",{onClick:i,style:{padding:"8px",background:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="var(--hover-bg)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:(0,r.jsx)(a.FiX,{style:{width:"20px",height:"20px"}})})]}),(0,r.jsxs)("form",{onSubmit:g,style:{padding:"24px",display:"flex",flexDirection:"column",gap:"24px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"8px"},children:"Rule Name *"}),(0,r.jsx)("input",{type:"text",value:d.name,onChange:e=>c(r=>({...r,name:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--card-bg)",color:"var(--text-primary)",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.currentTarget.style.borderColor="#dc2626",onBlur:e=>e.currentTarget.style.borderColor="var(--border)",placeholder:"e.g., Never risk more than 2% per trade",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"8px"},children:"Rule Description *"}),(0,r.jsx)("textarea",{value:d.description,onChange:e=>c(r=>({...r,description:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--card-bg)",color:"var(--text-primary)",fontSize:"14px",resize:"none",outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.currentTarget.style.borderColor="#dc2626",onBlur:e=>e.currentTarget.style.borderColor="var(--border)",rows:4,placeholder:"Describe the rule in detail and explain why it's important...",required:!0}),(0,r.jsx)("p",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:"Be specific about what the rule requires and the consequences of breaking it."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"12px"},children:"Category"}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:y.map(e=>(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)("input",{type:"radio",name:"category",value:e,checked:d.category===e,onChange:e=>c(r=>({...r,category:e.target.value})),style:{position:"absolute",opacity:0,pointerEvents:"none"}}),(0,r.jsxs)("span",{style:{flex:1,padding:"16px",borderRadius:"8px",border:d.category===e?"2px solid #dc2626":"2px solid var(--border)",background:d.category===e?"#dc2626":"var(--card-bg)",color:d.category===e?"white":"var(--text-primary)",cursor:"pointer",transition:"all 0.2s"},children:[(0,r.jsx)("div",{style:{fontWeight:"500",textTransform:"capitalize",marginBottom:"4px"},children:e}),(0,r.jsx)("div",{style:{fontSize:"12px",opacity:d.category===e?.9:.7},children:(e=>{switch(e){case"entry":return"Rules for when and how to enter trades";case"exit":return"Rules for when and how to exit trades";case"risk":return"Rules for position sizing and risk management";case"discipline":return"Rules for maintaining trading discipline";default:return""}})(e)})]})]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"12px"},children:"Severity Level"}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:m.map(e=>(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)("input",{type:"radio",name:"severity",value:e,checked:d.severity===e,onChange:e=>c(r=>({...r,severity:e.target.value})),style:{position:"absolute",opacity:0,pointerEvents:"none"}}),(0,r.jsx)("span",{style:{flex:1,padding:"16px",borderRadius:"8px",border:d.severity===e?"2px solid #dc2626":"2px solid var(--border)",background:d.severity===e?"#dc2626":"var(--card-bg)",color:d.severity===e?"white":"var(--text-primary)",cursor:"pointer",transition:"all 0.2s"},children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"space-between",width:"100%"},children:[(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("div",{style:{fontWeight:"500",textTransform:"capitalize",marginBottom:"4px"},children:e}),(0,r.jsx)("div",{style:{fontSize:"12px",opacity:d.severity===e?.9:.7},children:(e=>{switch(e){case"low":return"Minor rule, occasional violations acceptable";case"medium":return"Important rule, violations should be rare";case"high":return"Critical rule, strict adherence required";case"critical":return"Essential rule, never break under any circumstances";default:return""}})(e)})]}),(0,r.jsx)("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"critical"===e?"#f87171":"high"===e?"#fb923c":"medium"===e?"#fbbf24":"#4ade80",marginLeft:"12px"}})]})})]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)("input",{type:"checkbox",checked:d.isActive,onChange:e=>c(r=>({...r,isActive:e.target.checked})),style:{marginRight:"8px",accentColor:"#dc2626"}}),(0,r.jsx)("span",{style:{fontSize:"14px",color:"var(--text-primary)"},children:"Rule is active and should be enforced"})]}),(0,r.jsx)("p",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px",marginLeft:"24px"},children:"Inactive rules are kept for reference but won't trigger violations."})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",paddingTop:"16px",borderTop:"1px solid var(--border)"},children:[(0,r.jsx)("button",{type:"button",onClick:i,style:{padding:"8px 16px",background:"transparent",border:"none",borderRadius:"6px",color:"var(--text-secondary)",cursor:"pointer",fontSize:"14px",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="var(--hover-bg)",onMouseLeave:e=>e.currentTarget.style.background="transparent",disabled:x,children:"Cancel"}),(0,r.jsxs)(s.motion.button,{type:"submit",disabled:x,whileHover:{scale:1.02},whileTap:{scale:.98},style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 24px",background:x?"var(--disabled-bg)":"#dc2626",border:"none",borderRadius:"6px",color:"white",cursor:x?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background 0.2s",boxShadow:"var(--shadow-md)"},onMouseEnter:e=>{x||(e.currentTarget.style.background="#b91c1c")},onMouseLeave:e=>{x||(e.currentTarget.style.background="#dc2626")},children:[(0,r.jsx)(a.FiSave,{style:{width:"16px",height:"16px"}}),x?"Creating...":"Create Rule"]})]})]})]})})}function b({strategyId:e,onUpdate:i}){let[o,l]=(0,t.useState)([]),[d,c]=(0,t.useState)(!0),[x,p]=(0,t.useState)(!1),g=async()=>{try{let r=await fetch(`/api/strategies/${e}/rules`);if(!r.ok)throw Error("Failed to fetch rules");let t=await r.json();l(t)}catch(e){console.error("Error fetching rules:",e),n.default.error("Failed to load rules")}finally{c(!1)}};(0,t.useEffect)(()=>{g()},[e]);let u=async r=>{if(confirm("Are you sure you want to delete this rule?"))try{if(!(await fetch(`/api/strategies/${e}/rules/${r}`,{method:"DELETE"})).ok)throw Error("Failed to delete rule");l(e=>e.filter(e=>e.id!==r)),n.default.success("Rule deleted successfully")}catch(e){console.error("Error deleting rule:",e),n.default.error("Failed to delete rule")}};return d?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"h-32 bg-gray-200 rounded-lg"},t))})}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Strategy Rules"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Define rules to maintain discipline and consistency in your trading"})]}),(0,r.jsxs)(s.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-lg hover:from-red-700 hover:to-red-800 transition-all duration-200 shadow-lg",children:[(0,r.jsx)(a.FiPlus,{className:"w-4 h-4"}),"Add Rule"]})]}),0===o.length?(0,r.jsxs)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(a.FiBookOpen,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No rules yet"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create rules to maintain discipline and consistency in your trading strategy."}),(0,r.jsx)(s.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p(!0),className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-lg hover:from-red-700 hover:to-red-800 transition-all duration-200 shadow-lg",children:"Create First Rule"})]}):(0,r.jsx)("div",{className:"space-y-4",children:o.map((e,t)=>(0,r.jsxs)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.name}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e.toLowerCase()){case"entry":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"exit":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"risk":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"discipline":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}})(e.category)}`,children:e.category}),(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e.toLowerCase()){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"low":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}})(e.severity)}`,children:e.severity}),e.isActive?(0,r.jsxs)("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 text-xs font-medium rounded-full flex items-center gap-1",children:[(0,r.jsx)(a.FiCheckCircle,{className:"w-3 h-3"}),"Active"]}):(0,r.jsx)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-400 text-xs font-medium rounded-full",children:"Inactive"})]})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:e.description})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,r.jsx)("button",{onClick:()=>{},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Edit rule",children:(0,r.jsx)(a.FiEdit3,{className:"w-4 h-4 text-gray-500"})}),(0,r.jsx)("button",{onClick:()=>u(e.id),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete rule",children:(0,r.jsx)(a.FiTrash2,{className:"w-4 h-4 text-red-500"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("span",{children:["Created ",new Date(e.createdAt).toLocaleDateString()]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(a.FiAlertTriangle,{className:"w-3 h-3"}),(0,r.jsxs)("span",{children:[e.severity," priority"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(a.FiBookOpen,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:e.category})]})]})]})]},e.id))}),x&&(0,r.jsx)(h,{strategyId:e,onClose:()=>p(!1),onSuccess:()=>{p(!1),g(),n.default.success("Rule created successfully")}})]})}let f=["bull","bear","mixed"],v=["London","New York","Tokyo","Sydney","Asian","European","American"],j=[{id:"overview",label:"Overview",icon:a.FiTarget},{id:"entry-models",label:"Entry Models",icon:a.FiTarget},{id:"sequences",label:"Sequences",icon:a.FiSettings},{id:"rules",label:"Rules",icon:a.FiBookOpen}];function k({strategy:e,onClose:l,onUpdate:d}){let[c,p]=(0,t.useState)("overview"),[g,y]=(0,t.useState)(e),[m,h]=(0,t.useState)(!1),[k,w]=(0,t.useState)({name:e.name,description:e.description||"",marketType:e.marketType,preferredSessions:e.preferredSessions||[],riskPhilosophy:e.riskPhilosophy||""}),[S,N]=(0,t.useState)(!1),C=async()=>{N(!0);try{let e=await fetch(`/api/strategies/${g.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:k.name.trim(),description:k.description.trim()||void 0,marketType:k.marketType,preferredSessions:k.preferredSessions.length>0?k.preferredSessions:void 0,riskPhilosophy:k.riskPhilosophy.trim()||void 0})});if(!e.ok){let r=await e.json();throw Error(r.error||"Failed to update strategy")}let r=await e.json();y(r),h(!1),d(),n.default.success("Strategy updated successfully")}catch(e){console.error("Error updating strategy:",e),n.default.error(e instanceof Error?e.message:"Failed to update strategy")}finally{N(!1)}},T=e=>{y(e),d()};return(0,r.jsx)(o.default,{open:!0,onClose:l,children:(0,r.jsxs)(s.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-600 to-purple-700 rounded-lg flex items-center justify-center",children:(0,r.jsx)(a.FiTarget,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{children:[m?(0,r.jsx)("input",{type:"text",value:k.name,onChange:e=>w(r=>({...r,name:e.target.value})),className:"text-xl font-semibold bg-transparent border-b border-gray-300 dark:border-gray-600 focus:border-purple-500 outline-none text-gray-900 dark:text-white",autoFocus:!0}):(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:g.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Created ",new Date(g.createdAt).toLocaleDateString()]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>{h(!1),w({name:g.name,description:g.description||"",marketType:g.marketType,preferredSessions:g.preferredSessions||[],riskPhilosophy:g.riskPhilosophy||""})},className:"px-3 py-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),(0,r.jsxs)(s.motion.button,{onClick:C,disabled:S,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center gap-2 px-4 py-1.5 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 disabled:opacity-50 transition-all duration-200",children:[(0,r.jsx)(a.FiSave,{className:"w-4 h-4"}),S?"Saving...":"Save"]})]}):(0,r.jsx)("button",{onClick:()=>h(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,r.jsx)(a.FiEdit3,{className:"w-5 h-5 text-gray-500"})}),(0,r.jsx)("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,r.jsx)(a.FiX,{className:"w-5 h-5 text-gray-500"})})]})]}),(0,r.jsx)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:j.map(e=>{let t=e.icon;return(0,r.jsxs)("button",{onClick:()=>p(e.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium transition-colors ${c===e.id?"text-purple-600 dark:text-purple-400 border-b-2 border-purple-600 dark:border-purple-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[(0,r.jsx)(t,{className:"w-4 h-4"}),e.label]},e.id)})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,r.jsxs)(i.AnimatePresence,{mode:"wait",children:["overview"===c&&(0,r.jsxs)(s.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),m?(0,r.jsx)("textarea",{value:k.description,onChange:e=>w(r=>({...r,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",rows:3}):(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:g.description||"No description provided"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Market Type"}),m?(0,r.jsx)("div",{className:"flex gap-2",children:f.map(e=>(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:"marketType",value:e,checked:k.marketType===e,onChange:e=>w(r=>({...r,marketType:e.target.value})),className:"sr-only"}),(0,r.jsx)("span",{className:`px-3 py-1 rounded-lg border cursor-pointer transition-all text-sm ${k.marketType===e?"bg-purple-600 text-white border-purple-600":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,children:e.charAt(0).toUpperCase()+e.slice(1)})]},e))}):(0,r.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"bull"===g.marketType?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bear"===g.marketType?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:g.marketType.toUpperCase()})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Preferred Trading Sessions"}),m?(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:v.map(e=>(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:k.preferredSessions.includes(e),onChange:()=>{w(r=>({...r,preferredSessions:r.preferredSessions.includes(e)?r.preferredSessions.filter(r=>r!==e):[...r.preferredSessions,e]}))},className:"rounded border-gray-300 dark:border-gray-600 text-purple-600 focus:ring-purple-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e})]},e))}):(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:g.preferredSessions&&g.preferredSessions.length>0?g.preferredSessions.map(e=>(0,r.jsx)("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-sm text-gray-700 dark:text-gray-300 rounded-lg",children:e},e)):(0,r.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"No preferred sessions set"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Risk Philosophy"}),m?(0,r.jsx)("textarea",{value:k.riskPhilosophy,onChange:e=>w(r=>({...r,riskPhilosophy:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",rows:3}):(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:g.riskPhilosophy||"No risk philosophy defined"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-1",children:g.entryModels.length}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Entry Models"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 mb-1",children:g.timeframeSequences.length}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sequences"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-1",children:g.rules.length}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rules"})]})]})]},"overview"),"entry-models"===c&&(0,r.jsx)(s.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:(0,r.jsx)(x,{strategyId:g.id,onUpdate:T})},"entry-models"),"sequences"===c&&(0,r.jsx)(s.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:(0,r.jsx)(u,{strategyId:g.id,onUpdate:T})},"sequences"),"rules"===c&&(0,r.jsx)(s.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:(0,r.jsx)(b,{strategyId:g.id,onUpdate:T})},"rules")]})})]})})}function w({strategy:e,onDelete:i,onUpdate:o}){let[l,d]=(0,t.useState)(!1),[c,x]=(0,t.useState)(!1),p=async()=>{if(confirm("Are you sure you want to delete this strategy? This action cannot be undone."))try{if(!(await fetch(`/api/strategies/${e.id}`,{method:"DELETE"})).ok)throw Error("Failed to delete strategy");i(e.id)}catch(e){console.error("Error deleting strategy:",e),n.default.error("Failed to delete strategy")}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.motion.div,{whileHover:{y:-2},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer",onClick:()=>d(!0),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:e.name}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:e.description})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),x(!c)},className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,r.jsx)(a.FiMoreVertical,{className:"w-4 h-4 text-gray-500"})}),c&&(0,r.jsxs)(s.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"absolute right-0 top-8 w-32 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-lg z-10",children:[(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),d(!0),x(!1)},className:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-t-lg flex items-center gap-2",children:[(0,r.jsx)(a.FiEdit3,{className:"w-3 h-3"}),"Edit"]}),(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),p(),x(!1)},className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-b-lg flex items-center gap-2",children:[(0,r.jsx)(a.FiTrash2,{className:"w-3 h-3"}),"Delete"]})]})]})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(e=>{switch(e.toLowerCase()){case"bull":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"bear":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"mixed":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}})(e.marketType)}`,children:e.marketType.toUpperCase()})}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-lg mx-auto mb-1",children:(0,r.jsx)(a.FiTarget,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),(0,r.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Models"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:e.entryModels.length})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-orange-100 dark:bg-orange-900/30 rounded-lg mx-auto mb-1",children:(0,r.jsx)(a.FiSettings,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"})}),(0,r.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Sequences"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:e.timeframeSequences.length})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-red-100 dark:bg-red-900/30 rounded-lg mx-auto mb-1",children:(0,r.jsx)(a.FiBookOpen,{className:"w-4 h-4 text-red-600 dark:text-red-400"})}),(0,r.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Rules"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:e.rules.length})]})]}),e.preferredSessions&&e.preferredSessions.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Preferred Sessions:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.preferredSessions.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-xs text-gray-700 dark:text-gray-300 rounded",children:e},e))})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,r.jsxs)("span",{children:["Created ",new Date(e.createdAt).toLocaleDateString()]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(a.FiTrendingUp,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:"Active"})]})]})]}),l&&(0,r.jsx)(k,{strategy:e,onClose:()=>d(!1),onUpdate:o})]})}let S=["bull","bear","mixed"],N=["London","New York","Tokyo","Sydney","Asian","European","American"];function C({onClose:e,onSuccess:i}){let[l,d]=(0,t.useState)({name:"",description:"",marketType:"mixed",preferredSessions:[],riskPhilosophy:""}),[c,x]=(0,t.useState)(!1),p=async e=>{if(e.preventDefault(),!l.name.trim())return void n.default.error("Strategy name is required");x(!0);try{let e=await fetch("/api/strategies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l.name.trim(),description:l.description.trim()||void 0,marketType:l.marketType,preferredSessions:l.preferredSessions.length>0?l.preferredSessions:void 0,riskPhilosophy:l.riskPhilosophy.trim()||void 0})});if(!e.ok){let r=await e.json();throw Error(r.error||"Failed to create strategy")}i()}catch(e){console.error("Error creating strategy:",e),n.default.error(e instanceof Error?e.message:"Failed to create strategy")}finally{x(!1)}};return(0,r.jsx)(o.default,{open:!0,onClose:e,children:(0,r.jsxs)(s.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{backgroundColor:"var(--card-bg)",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",maxWidth:"512px",width:"100%",margin:"0 16px",maxHeight:"90vh",overflowY:"auto"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px",borderBottom:"1px solid var(--card-border)"},children:[(0,r.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",color:"var(--text-primary)",margin:0},children:"Create New Strategy"}),(0,r.jsx)("button",{onClick:e,style:{padding:"8px",borderRadius:"6px",border:"none",backgroundColor:"transparent",cursor:"pointer",color:"var(--text-secondary)",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--panel-muted)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:(0,r.jsx)(a.FiX,{size:16})})]}),(0,r.jsxs)("form",{onSubmit:p,style:{padding:"20px",display:"grid",gap:"20px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"8px"},children:"Strategy Name *"}),(0,r.jsx)("input",{type:"text",value:l.name,onChange:e=>d(r=>({...r,name:e.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid var(--card-border)",backgroundColor:"var(--panel-muted)",color:"var(--text-primary)",fontSize:"14px",outline:"none",transition:"border-color 0.2s ease"},onFocus:e=>{e.currentTarget.style.borderColor="var(--purple-base)"},onBlur:e=>{e.currentTarget.style.borderColor="var(--card-border)"},placeholder:"e.g., London Breakout Strategy",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"8px"},children:"Description"}),(0,r.jsx)("textarea",{value:l.description,onChange:e=>d(r=>({...r,description:e.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid var(--card-border)",backgroundColor:"var(--panel-muted)",color:"var(--text-primary)",fontSize:"14px",outline:"none",resize:"none",transition:"border-color 0.2s ease"},onFocus:e=>{e.currentTarget.style.borderColor="var(--purple-base)"},onBlur:e=>{e.currentTarget.style.borderColor="var(--card-border)"},rows:3,placeholder:"Describe your strategy approach and methodology..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"12px"},children:"Market Type"}),(0,r.jsx)("div",{style:{display:"flex",gap:"12px"},children:S.map(e=>(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,r.jsx)("input",{type:"radio",name:"marketType",value:e,checked:l.marketType===e,onChange:e=>d(r=>({...r,marketType:e.target.value})),style:{position:"absolute",opacity:0,pointerEvents:"none"}}),(0,r.jsx)("span",{style:{padding:"8px 16px",borderRadius:"6px",border:`1px solid ${l.marketType===e?"var(--purple-base)":"var(--card-border)"}`,backgroundColor:l.marketType===e?"var(--purple-base)":"var(--panel-muted)",color:l.marketType===e?"white":"var(--text-primary)",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease",textTransform:"capitalize"},children:e})]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"12px"},children:"Preferred Trading Sessions"}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"8px"},children:N.map(e=>(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"8px 12px",borderRadius:"6px",border:`1px solid ${l.preferredSessions.includes(e)?"var(--purple-base)":"var(--card-border)"}`,backgroundColor:l.preferredSessions.includes(e)?"var(--panel-muted)":"transparent",transition:"all 0.2s ease"},children:[(0,r.jsx)("input",{type:"checkbox",checked:l.preferredSessions.includes(e),onChange:()=>{d(r=>({...r,preferredSessions:r.preferredSessions.includes(e)?r.preferredSessions.filter(r=>r!==e):[...r.preferredSessions,e]}))},style:{width:"16px",height:"16px",borderRadius:"3px",border:"1px solid var(--card-border)",backgroundColor:l.preferredSessions.includes(e)?"var(--purple-base)":"transparent",cursor:"pointer"}}),(0,r.jsx)("span",{style:{fontSize:"14px",color:"var(--text-primary)"},children:e})]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"var(--text-primary)",marginBottom:"8px"},children:"Risk Philosophy"}),(0,r.jsx)("textarea",{value:l.riskPhilosophy,onChange:e=>d(r=>({...r,riskPhilosophy:e.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid var(--card-border)",backgroundColor:"var(--panel-muted)",color:"var(--text-primary)",fontSize:"14px",outline:"none",resize:"none",transition:"border-color 0.2s ease"},onFocus:e=>{e.currentTarget.style.borderColor="var(--purple-base)"},onBlur:e=>{e.currentTarget.style.borderColor="var(--card-border)"},rows:3,placeholder:"Describe your risk management approach..."})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",paddingTop:"16px",borderTop:"1px solid var(--card-border)"},children:[(0,r.jsx)("button",{type:"button",onClick:e,style:{padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:"transparent",color:"var(--text-secondary)",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--panel-muted)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},disabled:c,children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",disabled:c,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"6px",border:"none",background:"linear-gradient(135deg, var(--purple-base) 0%, var(--purple-dark) 100%)",color:"white",cursor:c?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.3s ease",opacity:c?.6:1},onMouseEnter:e=>{c||(e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(139, 92, 246, 0.3)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[(0,r.jsx)(a.FiSave,{size:16}),c?"Creating...":"Create Strategy"]})]})]})]})})}function T(){let[e,s]=(0,t.useState)([]),[i,o]=(0,t.useState)(!0),[l,d]=(0,t.useState)(!1),c=async()=>{try{let e=await fetch("/api/strategies");if(!e.ok)throw Error("Failed to fetch strategies");let r=await e.json();s(r)}catch(e){console.error("Error fetching strategies:",e),n.default.error("Failed to load strategies")}finally{o(!1)}};(0,t.useEffect)(()=>{c()},[]);let x=e=>{s(r=>r.filter(r=>r.id!==e)),n.default.success("Strategy deleted successfully")};return i?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,r.jsx)("div",{className:"h-64 bg-gray-200 rounded-lg"},t))})]})}):(0,r.jsx)("div",{style:{minHeight:"100vh",backgroundColor:"var(--background)"},children:(0,r.jsxs)("main",{style:{maxWidth:"1200px",margin:"0 auto",padding:"32px 16px"},children:[(0,r.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,r.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",color:"var(--text-primary)",marginBottom:"8px",margin:0},children:"Trading Strategies"}),(0,r.jsx)("p",{style:{fontSize:"14px",color:"var(--text-secondary)",margin:0},children:"Manage your trading strategies, entry models, and rules"})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[(0,r.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[(0,r.jsx)("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text-primary)",marginBottom:"4px"},children:e.length}),(0,r.jsx)("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:"Total Strategies"})]}),(0,r.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[(0,r.jsx)("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text-primary)",marginBottom:"4px"},children:e.filter(e=>"forex"===e.marketType).length}),(0,r.jsx)("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:"Forex Strategies"})]}),(0,r.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[(0,r.jsx)("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text-primary)",marginBottom:"4px"},children:e.filter(e=>"crypto"===e.marketType).length}),(0,r.jsx)("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:"Crypto Strategies"})]}),(0,r.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[(0,r.jsx)("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text-primary)",marginBottom:"4px"},children:e.reduce((e,r)=>e+(r.entryModels?.length||0),0)}),(0,r.jsx)("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:"Entry Models"})]})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{style:{fontSize:"20px",fontWeight:"600",color:"var(--text-primary)",margin:0},children:"Your Strategies"}),(0,r.jsx)("p",{style:{fontSize:"14px",color:"var(--text-secondary)",margin:"4px 0 0 0"},children:"Create and manage your trading strategies"})]}),(0,r.jsxs)("button",{onClick:()=>d(!0),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"linear-gradient(135deg, var(--purple-base) 0%, var(--purple-dark) 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"14px",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(139, 92, 246, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[(0,r.jsx)(a.FiPlus,{size:16}),"New Strategy"]})]}),i?(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:[...Array(6)].map((e,t)=>(0,r.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px",height:"200px"},children:[(0,r.jsx)("div",{style:{height:"20px",backgroundColor:"var(--panel-muted)",borderRadius:"4px",marginBottom:"12px",animation:"pulse 2s infinite"}}),(0,r.jsx)("div",{style:{height:"16px",backgroundColor:"var(--panel-muted)",borderRadius:"4px",width:"80%",marginBottom:"8px",animation:"pulse 2s infinite"}}),(0,r.jsx)("div",{style:{height:"16px",backgroundColor:"var(--panel-muted)",borderRadius:"4px",width:"60%",animation:"pulse 2s infinite"}})]},t))}):0===e.length?(0,r.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"48px",textAlign:"center"},children:[(0,r.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"📊"}),(0,r.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"8px"},children:"No Strategies Yet"}),(0,r.jsx)("p",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"20px"},children:"Create your first trading strategy to get started"}),(0,r.jsx)("button",{onClick:()=>d(!0),style:{padding:"12px 24px",background:"linear-gradient(135deg, var(--purple-base) 0%, var(--purple-dark) 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"14px"},children:"Create Your First Strategy"})]}):(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"},children:e.map(e=>(0,r.jsx)(w,{strategy:e,onDelete:x,onUpdate:c},e.id))}),l&&(0,r.jsx)(C,{onClose:()=>d(!1),onSuccess:()=>{d(!1),c(),n.default.success("Strategy created successfully")}})]})})}e.s(["default",()=>T],29096)}]);