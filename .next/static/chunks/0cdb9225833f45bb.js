(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96673,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(92199),s=e.i(68577),i=e.i(29228),n=e.i(55706),l=e.i(237),o=e.i(7670),d=e.i(97865),c=e.i(38279),x=e.i(494),m=e.i(94395),g=e.i(44171),h=e.i(31725),p=e.i(27241),u=e.i(61764),f=e.i(75337),y=e.i(89763),j=e.i(43404),b=e.i(51883),v=e.i(29601);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){var a,s,i;a=e,s=t,i=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function k(){return(k=Object.assign.bind()).apply(null,arguments)}function S(e){var t=(0,p.useAppDispatch)();return(0,r.useEffect)(()=>(t((0,h.addDot)(e)),()=>{t((0,h.removeDot)(e))})),null}function P(e){var{x:t,y:a,r:s}=e,i=(0,y.useClipPathId)(),n=((e,t,r,a,s)=>{var i=(0,m.isNumOrStr)(e),n=(0,m.isNumOrStr)(t),l=(0,f.useIsPanorama)(),o=(0,p.useAppSelector)(e=>(0,u.selectAxisScale)(e,"xAxis",r,l)),d=(0,p.useAppSelector)(e=>(0,u.selectAxisScale)(e,"yAxis",a,l));if(!i||!n||null==o||null==d)return null;var c=(0,g.createLabeledScales)({x:o,y:d}),x=c.apply({x:e,y:t},{bandAware:!0});return"discard"!==s||c.isInRange(x)?x:null})(t,a,e.xAxisId,e.yAxisId,e.ifOverflow);if(!n)return null;var{x:l,y:h}=n,{shape:b,className:N,ifOverflow:S}=e,P=w(w({clipPath:"hidden"===S?"url(#".concat(i,")"):void 0},(0,j.svgPropertiesAndEvents)(e)),{},{cx:l,cy:h});return r.createElement(v.ZIndexLayer,{zIndex:e.zIndex},r.createElement(d.Layer,{className:(0,o.clsx)("recharts-reference-dot",N)},r.isValidElement(b)?r.cloneElement(b,P):"function"==typeof b?b(P):r.createElement(c.Dot,k({},P,{cx:P.cx,cy:P.cy,className:"recharts-reference-dot-dot"})),r.createElement(x.CartesianLabelContextProvider,{x:l-s,y:h-s,width:2*s,height:2*s,upperWidth:2*s,lowerWidth:2*s},r.createElement(x.CartesianLabelFromLabelProp,{label:e.label}),e.children)))}var C={ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1,zIndex:e.i(18457).DefaultZIndexes.scatter};function L(e){var t=(0,b.resolveDefaultProps)(e,C),{x:a,y:s,r:i,ifOverflow:n,yAxisId:l,xAxisId:o}=t;return r.createElement(r.Fragment,null,r.createElement(S,{y:s,x:a,r:i,yAxisId:l,xAxisId:o,ifOverflow:n}),r.createElement(P,t))}L.displayName="ReferenceDot";var O=e.i(9694),F=e.i(75225),D=e.i(41891),T=e.i(38814),E=e.i(22787),R=e.i(85183),A=e.i(93230),M=e.i(72526),I=e.i(34239),W=e.i(74080),$=e.i(88860),z=e.i(48337),q=e.i(13659),B=e.i(73393);function U(){return(U=Object.assign.bind()).apply(null,arguments)}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var H={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function G(e){var t,{data:a,iconType:s,inactiveColor:i}=e,n=32/6,l=32/3,o=a.inactive?i:a.color,d=null!=s?s:a.type;if("none"===d)return null;if("plainline"===d)return r.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:null==(t=a.payload)?void 0:t.strokeDasharray,x1:0,y1:16,x2:32,y2:16,className:"recharts-legend-icon"});if("line"===d)return r.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(16,"h").concat(l,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(2*l,",").concat(16,"\n            H").concat(32,"M").concat(2*l,",").concat(16,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(l,",").concat(16),className:"recharts-legend-icon"});if("rect"===d)return r.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(32,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(r.isValidElement(a.legendIcon)){var c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach(function(t){var a,s,i;a=e,s=t,i=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},a);return delete c.legendIcon,r.cloneElement(a.legendIcon,c)}return r.createElement(q.Symbols,{fill:o,cx:16,cy:16,size:32,sizeType:"diameter",type:d})}function Y(e){var{payload:t,iconSize:a,layout:s,formatter:i,inactiveColor:n,iconType:l}=e,d={x:0,y:0,width:32,height:32},c={display:"horizontal"===s?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((t,s)=>{var m=t.formatter||i,g=(0,o.clsx)({"recharts-legend-item":!0,["legend-item-".concat(s)]:!0,inactive:t.inactive});if("none"===t.type)return null;var h=t.inactive?n:t.color,p=m?m(t.value,t,s):t.value;return r.createElement("li",U({className:g,style:c,key:"legend-item-".concat(s)},(0,B.adaptEventsOfChild)(e,t,s)),r.createElement(z.Surface,{width:a,height:a,viewBox:d,style:x,"aria-label":"".concat(p," legend icon")},r.createElement(G,{data:t,iconType:l,inactiveColor:n})),r.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},p))})}var Z=e=>{var t=(0,b.resolveDefaultProps)(e,H),{payload:a,layout:s,align:i}=t;return a&&a.length?r.createElement("ul",{className:"recharts-default-legend",style:{padding:0,margin:0,textAlign:"horizontal"===s?i:"left"}},r.createElement(Y,U({},t,{payload:a}))):null},J=e.i(51587),V=e.i(21307),X=e.i(35709),Q=e.i(46710),_=e.i(93882),ee=["contextPayload"];function et(){return(et=Object.assign.bind()).apply(null,arguments)}function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach(function(t){var a,s,i;a=e,s=t,i=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function es(e){return e.value}function ei(e){var{contextPayload:t}=e,a=function(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,ee),s=(0,J.getUniqPayload)(t,e.payloadUniqBy,es),i=ea(ea({},a),{},{payload:s});return r.isValidElement(e.content)?r.cloneElement(e.content,i):"function"==typeof e.content?r.createElement(e.content,i):r.createElement(Z,i)}function en(e){var t=(0,p.useAppDispatch)();return(0,r.useEffect)(()=>{t((0,_.setLegendSettings)(e))},[t,e]),null}function el(e){var t=(0,p.useAppDispatch)();return(0,r.useEffect)(()=>(t((0,_.setLegendSize)(e)),()=>{t((0,_.setLegendSize)({width:0,height:0}))}),[t,e]),null}var eo={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function ed(e){var t,a=(0,b.resolveDefaultProps)(e,eo),s=(0,p.useAppSelector)(V.selectLegendPayload),i=(0,$.useLegendPortal)(),n=(0,Q.useMargin)(),{width:l,height:o,wrapperStyle:d,portal:c}=a,[x,g]=(0,X.useElementOffset)([s]),h=(0,Q.useChartWidth)(),u=(0,Q.useChartHeight)();if(null==h||null==u)return null;var f=h-((null==n?void 0:n.left)||0)-((null==n?void 0:n.right)||0),y=(t=a.layout,"vertical"===t&&(0,m.isNumber)(o)?{height:o}:"horizontal"===t?{width:l||f}:null),j=c?d:ea(ea({position:"absolute",width:(null==y?void 0:y.width)||l||"auto",height:(null==y?void 0:y.height)||o||"auto"},function(e,t,r,a,s,i){var n,l,{layout:o,align:d,verticalAlign:c}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(n="center"===d&&"vertical"===o?{left:((a||0)-i.width)/2}:"right"===d?{right:r&&r.right||0}:{left:r&&r.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(l="middle"===c?{top:((s||0)-i.height)/2}:"bottom"===c?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),ea(ea({},n),l)}(d,a,n,h,u,x)),d),v=null!=c?c:i;if(null==v||null==s)return null;var N=r.createElement("div",{className:"recharts-legend-wrapper",style:j,ref:g},r.createElement(en,{layout:a.layout,align:a.align,verticalAlign:a.verticalAlign,itemSorter:a.itemSorter}),!c&&r.createElement(el,{width:x.width,height:x.height}),r.createElement(ei,et({},a,y,{margin:n,chartWidth:h,chartHeight:u,contextPayload:s})));return(0,W.createPortal)(N,v)}ed.displayName="Legend";var ec=e.i(31195),ex=e.i(70703);function em({active:e,payload:r,label:a}){if(!e||!r||!r.length)return null;let s=r.find(e=>"equity"===e.dataKey)||r[0],i=r.find(e=>"drawdown"===e.dataKey);return(0,t.jsxs)("div",{className:"bg-gray-900 p-2 rounded text-sm text-white",children:[(0,t.jsx)("div",{className:"font-bold",children:a}),s&&(0,t.jsxs)("div",{children:["Equity: ",(0,t.jsx)("span",{className:"font-mono",children:String(s.value)})]}),i&&(0,t.jsxs)("div",{children:["Drawdown: ",(0,t.jsx)("span",{className:"font-mono",children:String(i.value)})]})]})}let eg=(0,ex.default)(()=>e.A(83487),{loadableGenerated:{modules:[61392]},ssr:!1}),eh=(0,ex.default)(()=>e.A(74046),{loadableGenerated:{modules:[96909]},ssr:!1});function ep({trades:e,startDate:a,endDate:s}){let[o,d]=(0,r.useState)({dailyPnL:[],pairPerformance:[],directionPerformance:[],equity:[]});(0,r.useEffect)(()=>{if(!e.length)return;let t=e;(a||s)&&(t=e.filter(e=>{let t=new Date(e.entryTime);return!(a&&new Date(t.toISOString().slice(0,10))<new Date(a)||s&&new Date(t.toISOString().slice(0,10))>new Date(s))}));let r={};t.forEach(e=>{let t=new Date(e.entryTime).toLocaleDateString();r[t]=(r[t]||0)+(e.profitLoss||0)});let i=Object.entries(r).map(([e,t])=>({date:e,pnl:Math.round(100*t)/100})),n={};e.forEach(e=>{n[e.pair]||(n[e.pair]={wins:0,losses:0,pnl:0}),"WIN"===e.outcome&&n[e.pair].wins++,"LOSS"===e.outcome&&n[e.pair].losses++,n[e.pair].pnl+=e.profitLoss||0});let l=Object.entries(n).map(([e,t])=>({pair:e,wins:t.wins,losses:t.losses,pnl:Math.round(100*t.pnl)/100})),o={LONG:{wins:0,losses:0},SHORT:{wins:0,losses:0}};e.forEach(e=>{"WIN"===e.outcome?o[e.direction].wins++:"LOSS"===e.outcome&&o[e.direction].losses++});let c=Object.entries(o).map(([e,t])=>({direction:e,value:t.wins,name:`${e} (${t.wins} wins)`})),x=[...t].sort((e,t)=>new Date(e.entryTime).getTime()-new Date(t.entryTime).getTime()),m=0,g=-1/0,h=x.map(e=>{m+=e.profitLoss||0;let t=Math.round(((g=Math.max(g,m))-m)*100)/100;return{date:new Date(e.entryTime).toLocaleDateString(),equity:Math.round(100*m)/100,drawdown:t}});h.reduce((e,t)=>Math.max(e,t.drawdown),0),h.length&&h.reduce((e,t)=>t.equity>e.equity?t:e,h[0]),h.length&&h.reduce((e,t)=>t.equity<e.equity?t:e,h[0]),d({dailyPnL:i,pairPerformance:l,directionPerformance:c,equity:h})},[e]);let c=o.equity.length?o.equity.reduce((e,t)=>t.equity>e.equity?t:e,o.equity[0]):null,x=o.equity.length?o.equity.reduce((e,t)=>t.equity<e.equity?t:e,o.equity[0]):null,m=["#10b981","#ef4444"];return(0,t.jsxs)("div",{className:"space-y-8",children:[o.equity.length>0&&(0,t.jsxs)("div",{className:"card-glass rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-200 mb-4",children:"Equity Curve (Live)"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(eg,{selector:".recharts-wrapper",filename:`equity-${new Date().toISOString().slice(0,10)}.png`})})]}),(0,t.jsx)(ec.ResponsiveContainer,{width:"100%",height:320,children:(0,t.jsxs)(i.LineChart,{data:o.equity,className:"equity-chart",children:["              ",(0,t.jsx)(M.CartesianGrid,{strokeDasharray:"3 3",stroke:"#111827"}),(0,t.jsx)(R.XAxis,{dataKey:"date",stroke:"#6b7280"}),(0,t.jsx)(A.YAxis,{stroke:"#6b7280"}),(0,t.jsx)(I.Tooltip,{content:(0,t.jsx)(em,{})}),(0,t.jsx)(l.Area,{type:"monotone",dataKey:"drawdown",fill:"#7c3aed",fillOpacity:.06,stroke:"none"}),(0,t.jsx)(n.Line,{type:"monotone",dataKey:"equity",stroke:"#06b6d4",strokeWidth:3,dot:!1,strokeOpacity:.98,isAnimationActive:!0,animationDuration:1200}),(0,t.jsx)(n.Line,{type:"monotone",dataKey:"drawdown",stroke:"#7c3aed",strokeWidth:2,dot:!1,strokeOpacity:.6,isAnimationActive:!0,animationDuration:1e3}),c&&(0,t.jsx)(L,{x:c.date,y:c.equity,r:6,fill:"#06b6d4",stroke:"#fff",strokeWidth:1}),x&&(0,t.jsx)(L,{x:x.date,y:x.equity,r:6,fill:"#7c3aed",stroke:"#fff",strokeWidth:1})]})})]}),o.dailyPnL.length>0&&(0,t.jsxs)("div",{className:"card-glass rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-200 mb-4",children:"Daily P&L"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eg,{selector:".recharts-wrapper",filename:`daily-pnl-${new Date().toISOString().slice(0,10)}.png`}),(0,t.jsx)(eh,{trades:e,chartSelector:".recharts-wrapper"})]})]}),(0,t.jsx)(ec.ResponsiveContainer,{width:"100%",height:300,children:(0,t.jsxs)(i.LineChart,{data:o.dailyPnL,children:[(0,t.jsx)(M.CartesianGrid,{strokeDasharray:"3 3",stroke:"#111827"}),(0,t.jsx)(R.XAxis,{dataKey:"date",stroke:"#6b7280"}),(0,t.jsx)(A.YAxis,{stroke:"#6b7280"}),(0,t.jsx)(I.Tooltip,{contentStyle:{backgroundColor:"#0b1220",border:"none",borderRadius:"0.5rem",color:"#fff"}}),(0,t.jsx)(n.Line,{type:"monotone",dataKey:"pnl",stroke:"#3b82f6",dot:{fill:"#3b82f6"},isAnimationActive:!0,strokeWidth:2})]})})]}),o.pairPerformance.length>0&&(0,t.jsxs)("div",{className:"card-glass rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-200 mb-4",children:"Performance by Pair"}),(0,t.jsx)(ec.ResponsiveContainer,{width:"100%",height:300,children:(0,t.jsxs)(O.BarChart,{data:o.pairPerformance,children:[(0,t.jsx)(M.CartesianGrid,{strokeDasharray:"3 3",stroke:"#111827"}),(0,t.jsx)(R.XAxis,{dataKey:"pair",stroke:"#6b7280"}),(0,t.jsx)(A.YAxis,{stroke:"#6b7280"}),(0,t.jsx)(I.Tooltip,{contentStyle:{backgroundColor:"#0b1220",border:"none",borderRadius:"0.5rem",color:"#fff"}}),(0,t.jsx)(ed,{}),(0,t.jsx)(F.Bar,{dataKey:"wins",fill:"#10b981"}),(0,t.jsx)(F.Bar,{dataKey:"losses",fill:"#ef4444"})]})})]}),o.directionPerformance.length>0&&(0,t.jsxs)("div",{className:"card-glass rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-200 mb-4",children:"Win Rate by Direction"}),(0,t.jsx)(ec.ResponsiveContainer,{width:"100%",height:300,children:(0,t.jsxs)(D.PieChart,{children:[(0,t.jsx)(T.Pie,{data:o.directionPerformance,cx:"50%",cy:"50%",labelLine:!1,label:({name:e})=>e,outerRadius:80,fill:"#8884d8",dataKey:"value",children:o.directionPerformance.map((e,r)=>(0,t.jsx)(E.Cell,{fill:m[r%m.length]},`cell-${r}`))}),(0,t.jsx)(I.Tooltip,{contentStyle:{backgroundColor:"#0b1220",border:"none",borderRadius:"0.5rem",color:"#fff"}})]})})]})]})}function eu({trades:e,onSelectRange:a}){let s=(0,r.useMemo)(()=>{let t={},r=new Date;for(let e=0;e<365;e++){let a=new Date(r);a.setDate(r.getDate()-e),t[a.toISOString().slice(0,10)]=0}return e.forEach(e=>{let r=function(e){if(!e)return null;let t=new Date("number"==typeof e?e:String(e));return!(t instanceof Date)||isNaN(t.getTime())?null:t.toISOString().slice(0,10)}(e.entryTime);r&&void 0!==t[r]&&(t[r]=(t[r]||0)+(e.profitLoss||0))}),Object.entries(t).map(([e,t])=>({day:e,pnl:t}))},[e]),i=Math.max(...s.map(e=>Math.abs(e.pnl)),1),[n,l]=(0,r.useState)(null),[o,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{a&&a({start:n,end:o})},[n,o,a]);let[c,x]=(0,r.useState)(!1);function m(e){if(c){let t=new Date(e),r=new Date(t.getFullYear(),t.getMonth(),1).toISOString().slice(0,10),a=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString().slice(0,10);l(r),d(a);return}if(!n){l(e),d(null);return}if(n&&!o){if(e===n){l(null),d(null);return}let t=new Date(n);new Date(e)<t?(l(e),d(t.toISOString().slice(0,10))):d(e);return}l(e),d(null)}return(0,t.jsxs)("div",{className:"card-glass p-4 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-200 mb-4",children:"Yearly P&L Heatmap"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:[n&&(0,t.jsxs)("span",{children:["From ",(0,t.jsx)("strong",{children:n})]})," ",o&&(0,t.jsxs)("span",{children:[" to ",(0,t.jsx)("strong",{children:o})]}),(n||o)&&(0,t.jsx)("button",{className:"ml-3 text-sm text-blue-400",onClick:()=>{l(null),d(null),a&&a({start:null,end:null})},children:"Clear"})]}),(0,t.jsx)("button",{type:"button","aria-pressed":c,"aria-label":"Toggle month zoom",className:`px-2 py-1 rounded ${c?"bg-indigo-600 text-white":"bg-transparent text-gray-300 border border-gray-700"}`,onClick:()=>x(e=>!e),children:c?"Month Zoom: ON":"Month Zoom: OFF"})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-52 gap-1",role:"grid","aria-label":"Yearly profit/loss heatmap",style:{gap:"6px"},children:s.map(e=>{let r=Math.min(1,Math.abs(e.pnl)/i),a=e.pnl>0?`rgba(16,185,129,${.14+.86*r})`:e.pnl<0?`rgba(239,68,68,${.14+.86*r})`:"transparent",s=function(e){if(!n)return!1;if(n&&!o)return e===n;let t=new Date(n),r=new Date(o),a=new Date(e);return a>=t&&a<=r}(e.day),l=Math.abs(e.pnl)>.25*i;return(0,t.jsx)("button",{title:`${e.day}: ${e.pnl}`,"aria-pressed":s,onClick:()=>m(e.day),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),m(e.day))},style:{background:a,width:"36px",height:"36px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--foreground)",fontSize:"11px",...s?{boxShadow:"0 0 0 3px rgba(99,102,241,0.12)",outline:"none"}:{}},className:"focus:outline-none",children:l?e.pnl>0?`+$${Math.round(e.pnl)}`:`-$${Math.abs(Math.round(e.pnl))}`:""},e.day)})}),(0,t.jsx)("div",{className:"text-xs text-gray-400 mt-2",children:"Green = Profit, Pink = Loss. Click a day to set start, click another to set end. Toggle Month Zoom to select whole month on click. Clear to reset selection."})]})}function ef({trades:e}){let a=(0,r.useMemo)(()=>{let t={};return e.forEach(e=>{let r=new Date(e.entryTime),a=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;t[a]||(t[a]={pnl:0,trades:[]}),t[a].pnl+=e.profitLoss||0,t[a].trades.push(e)}),Object.entries(t).sort((e,t)=>t[0].localeCompare(e[0]))},[e]),[s,i]=(0,r.useState)({});return(0,t.jsxs)("div",{className:"card-glass p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-200 mb-4",children:"Monthly Performance"}),(0,t.jsx)("div",{className:"space-y-2",children:a.map(([e,r])=>(0,t.jsxs)("div",{className:"border border-transparent hover:border-gray-700 rounded-lg p-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i(t=>({...t,[e]:!t[e]})),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-300 font-medium",children:e}),(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:[r.trades.length," trades"]})]}),(0,t.jsx)("div",{className:`text-lg font-bold ${r.pnl>=0?"text-green-400":"text-red-400"}`,children:r.pnl.toFixed(2)})]}),s[e]&&(0,t.jsx)("div",{className:"mt-2 text-sm text-gray-300",children:r.trades.map((e,r)=>(0,t.jsxs)("div",{className:"py-1 border-t border-gray-800",children:[new Date(e.entryTime).toLocaleString()," — ",e.pair," — ",e.profitLoss]},r))})]},e))})]})}var ey=e.i(46932),ej=e.i(53276);let eb=({trades:e,strategies:s})=>{let i=(0,r.useMemo)(()=>{if(0===e.length||0===s.length)return null;let t=e.filter(e=>"closed"===e.status&&null!==e.profitLoss&&void 0!==e.profitLoss);return s.map(e=>{let r=t.filter(t=>t.strategyId===e.id);if(0===r.length)return{...e,trades:0,wins:0,losses:0,winRate:0,totalPnL:0,avgPnL:0,profitFactor:0,expectancy:0,bestPair:"",worstPair:""};let a=r.filter(e=>e.profitLoss>0),s=r.filter(e=>e.profitLoss<0),i=r.reduce((e,t)=>e+(t.profitLoss||0),0),n=a.length/r.length*100,l=i/r.length,o=a.reduce((e,t)=>e+t.profitLoss,0),d=Math.abs(s.reduce((e,t)=>e+t.profitLoss,0)),c=a.length>0?a.reduce((e,t)=>e+t.profitLoss,0)/a.length:0,x=s.length>0?s.reduce((e,t)=>e+t.profitLoss,0)/s.length:0,m=r.reduce((e,t)=>(e[t.pair]||(e[t.pair]={total:0,pnl:0}),e[t.pair].total++,e[t.pair].pnl+=t.profitLoss||0,e),{}),g=Object.entries(m).sort(([,e],[,t])=>t.pnl-e.pnl)[0]?.[0]||"",h=Object.entries(m).sort(([,e],[,t])=>e.pnl-t.pnl)[0]?.[0]||"";return{...e,trades:r.length,wins:a.length,losses:s.length,winRate:n,totalPnL:i,avgPnL:l,profitFactor:d>0?o/d:o>0?1/0:1,expectancy:n>0&&0!==x?n/100*c+(100-n)/100*x:0,bestPair:g,worstPair:h}}).filter(e=>e.trades>0).sort((e,t)=>t.totalPnL-e.totalPnL)},[e,s]),n=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),l=e=>`${e.toFixed(1)}%`;return i&&0!==i.length?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((e,r)=>(0,t.jsx)(ey.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},children:(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.name}),0===r&&e.totalPnL>0&&(0,t.jsx)(a.FiAward,{className:"w-5 h-5 text-yellow-500"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total P&L"}),(0,t.jsx)("span",{className:`font-semibold ${e.totalPnL>=0?"text-green-600":"text-red-600"}`,children:n(e.totalPnL)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Win Rate"}),(0,t.jsx)("span",{className:"font-semibold text-blue-600",children:l(e.winRate)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Trades"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:e.trades})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Profit Factor"}),(0,t.jsx)("span",{className:"font-semibold text-purple-600",children:e.profitFactor===1/0?"∞":e.profitFactor.toFixed(2)})]}),e.bestPair&&(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Best Pair"}),(0,t.jsx)("span",{className:"font-semibold text-green-600",children:e.bestPair})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[(0,t.jsx)("span",{children:"Performance"}),(0,t.jsxs)("span",{children:[e.totalPnL>=0?"+":"",n(e.totalPnL)]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,t.jsx)(ey.motion.div,{initial:{width:0},animate:{width:`${Math.min(Math.max(e.totalPnL/1e3*100,10),100)}%`},className:`h-2 rounded-full ${e.totalPnL>=0?"bg-green-500":"bg-red-500"}`})})]})]})},e.id))}),(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Strategy Performance Comparison"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Strategy"}),(0,t.jsx)("th",{className:"text-right py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Trades"}),(0,t.jsx)("th",{className:"text-right py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Win Rate"}),(0,t.jsx)("th",{className:"text-right py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Total P&L"}),(0,t.jsx)("th",{className:"text-right py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Avg P&L"}),(0,t.jsx)("th",{className:"text-right py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Profit Factor"}),(0,t.jsx)("th",{className:"text-right py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Expectancy"})]})}),(0,t.jsx)("tbody",{children:i.map((e,r)=>(0,t.jsxs)(ey.motion.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.05*r},className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[(0,t.jsx)("td",{className:"py-3 px-4 font-medium text-gray-900 dark:text-white",children:e.name}),(0,t.jsx)("td",{className:"py-3 px-4 text-right text-gray-600 dark:text-gray-400",children:e.trades}),(0,t.jsx)("td",{className:"py-3 px-4 text-right",children:(0,t.jsx)("span",{className:`font-medium ${e.winRate>=60?"text-green-600":e.winRate>=50?"text-yellow-600":"text-red-600"}`,children:l(e.winRate)})}),(0,t.jsx)("td",{className:"py-3 px-4 text-right",children:(0,t.jsx)("span",{className:`font-medium ${e.totalPnL>=0?"text-green-600":"text-red-600"}`,children:n(e.totalPnL)})}),(0,t.jsx)("td",{className:"py-3 px-4 text-right",children:(0,t.jsx)("span",{className:`font-medium ${e.avgPnL>=0?"text-green-600":"text-red-600"}`,children:n(e.avgPnL)})}),(0,t.jsx)("td",{className:"py-3 px-4 text-right",children:(0,t.jsx)("span",{className:`font-medium ${e.profitFactor>=1.5?"text-green-600":e.profitFactor>=1?"text-yellow-600":"text-red-600"}`,children:e.profitFactor===1/0?"∞":e.profitFactor.toFixed(2)})}),(0,t.jsx)("td",{className:"py-3 px-4 text-right",children:(0,t.jsx)("span",{className:`font-medium ${e.expectancy>=0?"text-green-600":"text-red-600"}`,children:n(e.expectancy)})})]},e.id))})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Performing Strategy"}),i[0]&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(a.FiAward,{className:"w-6 h-6 text-yellow-500"}),(0,t.jsx)("span",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:i[0].name})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:n(i[0].totalPnL)}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total P&L"})]}),(0,t.jsxs)("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:l(i[0].winRate)}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Win Rate"})]})]}),i[0].description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:i[0].description})]})]}),(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Strategy Recommendations"}),(0,t.jsxs)("div",{className:"space-y-3",children:[i.some(e=>e.profitFactor>=1.5)?(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,t.jsx)(a.FiTrendingUp,{className:"w-5 h-5 text-green-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-green-800 dark:text-green-200",children:"Strong Strategies Identified"}),(0,t.jsx)("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Focus on strategies with profit factor ≥ 1.5"})]})]}):(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[(0,t.jsx)(a.FiAlertTriangle,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Strategy Optimization Needed"}),(0,t.jsx)("div",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Consider refining strategies with low profit factors"})]})]}),i.some(e=>e.trades<10)&&(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,t.jsx)(a.FiBarChart,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-blue-800 dark:text-blue-200",children:"More Data Needed"}),(0,t.jsx)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Strategies with fewer than 10 trades need more testing"})]})]})]})]})]})]}):(0,t.jsxs)(ej.default,{className:"p-8 text-center",children:[(0,t.jsx)(a.FiTarget,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Strategy Data Available"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Assign strategies to your trades to see strategy performance comparisons"})]})},ev=({trades:e,journalEntries:s})=>{let i=(0,r.useMemo)(()=>{if(0===e.length&&0===s.length)return null;let t=e.filter(e=>"closed"===e.status&&null!==e.profitLoss&&void 0!==e.profitLoss),r=t.reduce((e,t)=>{let r=t.emotionalState;return r&&(e[r]||(e[r]={count:0,wins:0,losses:0,totalPnL:0}),e[r].count++,e[r].totalPnL+=t.profitLoss||0,t.profitLoss>0?e[r].wins++:t.profitLoss<0&&e[r].losses++),e},{}),a=s.reduce((e,t)=>{let r=t.mentalState;return r&&(e[r]||(e[r]={count:0,avgConfidence:0,totalConfidence:0}),e[r].count++,t.confidence&&(e[r].totalConfidence+=t.confidence)),e},{});Object.keys(a).forEach(e=>{let t=a[e];t.avgConfidence=t.totalConfidence/t.count});let i=s.reduce((e,t)=>{let r=t.focus;return r&&(e[r]||(e[r]={count:0,avgConfidence:0,totalConfidence:0}),e[r].count++,t.confidence&&(e[r].totalConfidence+=t.confidence)),e},{});Object.keys(i).forEach(e=>{let t=i[e];t.avgConfidence=t.totalConfidence/t.count});let n=s.reduce((e,t)=>{let r=t.phase;return r&&(e[r]||(e[r]={count:0,avgConfidence:0,totalConfidence:0}),e[r].count++,t.confidence&&(e[r].totalConfidence+=t.confidence)),e},{});Object.keys(n).forEach(e=>{let t=n[e];t.avgConfidence=t.totalConfidence/t.count});let l=s.map(e=>{let r=new Date(e.date).toDateString(),a=t.filter(e=>new Date(e.entryTime).toDateString()===r),s=a.reduce((e,t)=>e+(t.profitLoss||0),0);return{date:e.date,confidence:e.confidence||0,pnl:s,trades:a.length}}).filter(e=>e.trades>0),o=function(e,t){if(e.length!==t.length||0===e.length)return 0;let r=e.length,a=e.reduce((e,t)=>e+t,0),s=t.reduce((e,t)=>e+t,0),i=e.reduce((e,r,a)=>e+r*t[a],0),n=Math.sqrt((r*e.reduce((e,t)=>e+t*t,0)-a*a)*(r*t.reduce((e,t)=>e+t*t,0)-s*s));return 0===n?0:(r*i-a*s)/n}(l.map(e=>e.confidence),l.map(e=>e.pnl)),d=s.reduce((e,t)=>{let r=new Date(t.date).toLocaleDateString("en-US",{weekday:"long"});return e[r]||(e[r]={count:0,avgConfidence:0,totalConfidence:0}),e[r].count++,t.confidence&&(e[r].totalConfidence+=t.confidence),e},{});return Object.keys(d).forEach(e=>{let t=d[e];t.avgConfidence=t.totalConfidence/t.count}),{tradeEmotions:r,journalEmotions:a,focusAnalysis:i,phaseAnalysis:n,confidenceCorrelation:l,correlation:o,weeklyPatterns:d,totalJournalEntries:s.length,totalTrades:t.length}},[e,s]),n=e=>{switch(e.toLowerCase()){case"excellent":case"great":case"good":return(0,t.jsx)(a.FiSmile,{className:"w-5 h-5 text-green-500"});case"okay":case"neutral":return(0,t.jsx)(a.FiMeh,{className:"w-5 h-5 text-yellow-500"});case"poor":case"bad":case"terrible":return(0,t.jsx)(a.FiFrown,{className:"w-5 h-5 text-red-500"});default:return(0,t.jsx)(a.FiMeh,{className:"w-5 h-5 text-gray-500"})}},l=e=>{switch(e.toLowerCase()){case"excellent":case"great":case"good":return"text-green-600 dark:text-green-400";case"okay":case"neutral":return"text-yellow-600 dark:text-yellow-400";case"poor":case"bad":case"terrible":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}};return i?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)(ej.default,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(a.FiActivity,{className:"w-8 h-8 text-purple-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.totalJournalEntries}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Journal Entries"})]})]})}),(0,t.jsx)(ej.default,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(a.FiTarget,{className:"w-8 h-8 text-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.totalTrades}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tracked Trades"})]})]})}),(0,t.jsx)(ej.default,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(a.FiTrendingUp,{className:"w-8 h-8 text-green-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.correlation.toFixed(2)}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Confidence-P&L Correlation"})]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Object.keys(i.tradeEmotions).length>0&&(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Trading Emotional States"}),(0,t.jsx)("div",{className:"space-y-3",children:Object.entries(i.tradeEmotions).sort(([,e],[,t])=>t.totalPnL-e.totalPnL).map(([e,r])=>{let a,s;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[n(e),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:`font-medium capitalize ${l(e)}`,children:e}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.count," trades • ",(a=r.wins/r.count*100,`${a.toFixed(1)}%`)," win rate"]})]})]}),(0,t.jsx)("div",{className:`font-semibold ${r.totalPnL>=0?"text-green-600":"text-red-600"}`,children:(s=r.totalPnL,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(s))})]},e)})})]}),Object.keys(i.journalEmotions).length>0&&(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Journal Mental States"}),(0,t.jsx)("div",{className:"space-y-3",children:Object.entries(i.journalEmotions).sort(([,e],[,t])=>t.avgConfidence-e.avgConfidence).map(([e,r])=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[n(e),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:`font-medium capitalize ${l(e)}`,children:e}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.count," entries"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-semibold text-gray-900 dark:text-white",children:[r.avgConfidence.toFixed(1),"/10"]}),(0,t.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Confidence"})]})]},e))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Object.keys(i.focusAnalysis).length>0&&(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Focus Level Impact"}),(0,t.jsx)("div",{className:"space-y-3",children:Object.entries(i.focusAnalysis).sort(([,e],[,t])=>t.avgConfidence-e.avgConfidence).map(([e,r])=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(a.FiTarget,{className:`w-5 h-5 ${"high"===e?"text-green-500":"medium"===e?"text-yellow-500":"text-red-500"}`}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-medium capitalize text-gray-900 dark:text-white",children:[e," Focus"]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.count," entries"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-semibold text-gray-900 dark:text-white",children:[r.avgConfidence.toFixed(1),"/10"]}),(0,t.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Confidence"})]})]},e))})]}),Object.keys(i.phaseAnalysis).length>0&&(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Trading Phase Performance"}),(0,t.jsx)("div",{className:"space-y-3",children:Object.entries(i.phaseAnalysis).sort(([,e],[,t])=>t.avgConfidence-e.avgConfidence).map(([e,r])=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(a.FiTrendingUp,{className:"w-5 h-5 text-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium capitalize text-gray-900 dark:text-white",children:e.replace("-"," ")}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.count," entries"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-semibold text-gray-900 dark:text-white",children:[r.avgConfidence.toFixed(1),"/10"]}),(0,t.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Confidence"})]})]},e))})]})]}),i.confidenceCorrelation.length>0&&(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Confidence vs Performance Correlation"}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Correlation Coefficient: ",i.correlation.toFixed(3)]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[i.correlation>.3&&(0,t.jsx)(a.FiTrendingUp,{className:"w-4 h-4 text-green-500"}),i.correlation<-.3&&(0,t.jsx)(a.FiTrendingDown,{className:"w-4 h-4 text-red-500"}),(0,t.jsx)("span",{className:`text-sm font-medium ${i.correlation>.3?"text-green-600":i.correlation<-.3?"text-red-600":"text-gray-600"}`,children:i.correlation>.3?"Positive Correlation":i.correlation<-.3?"Negative Correlation":"Weak/No Correlation"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-blue-600",children:i.confidenceCorrelation.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data Points"})]}),(0,t.jsxs)("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-green-600",children:i.confidenceCorrelation.filter(e=>e.pnl>0).length}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Profitable Days"})]}),(0,t.jsxs)("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-purple-600",children:(i.confidenceCorrelation.reduce((e,t)=>e+t.confidence,0)/i.confidenceCorrelation.length).toFixed(1)}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Confidence"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[i.correlation>.5&&(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,t.jsx)(a.FiTrendingUp,{className:"w-5 h-5 text-green-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-green-800 dark:text-green-200",children:"Strong Positive Correlation"}),(0,t.jsx)("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Higher confidence levels are associated with better trading performance"})]})]}),i.correlation<-.5&&(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,t.jsx)(a.FiTrendingDown,{className:"w-5 h-5 text-red-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-red-800 dark:text-red-200",children:"Negative Correlation Detected"}),(0,t.jsx)("div",{className:"text-sm text-red-700 dark:text-red-300",children:"Higher confidence may be leading to overconfidence and poorer results"})]})]}),.3>Math.abs(i.correlation)&&(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[(0,t.jsx)(a.FiAlertTriangle,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Weak Correlation"}),(0,t.jsx)("div",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Confidence levels don't strongly predict trading performance"})]})]})]})]}),Object.keys(i.weeklyPatterns).length>0&&(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Weekly Confidence Patterns"}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-4",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(e=>{let r=i.weeklyPatterns[e],a=r?r.avgConfidence:0,s=r?r.count:0;return(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e.slice(0,3)}),(0,t.jsxs)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-16 flex items-end justify-center relative",children:[(0,t.jsx)(ey.motion.div,{initial:{height:0},animate:{height:a>0?`${a/10*100}%`:"4px"},className:"w-6 bg-gradient-to-t from-blue-500 to-blue-400 rounded-t"}),s>0&&(0,t.jsx)("div",{className:"absolute -top-6 text-xs text-gray-600 dark:text-gray-400",children:s})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:a>0?a.toFixed(1):"-"})]},e)})}),(0,t.jsx)("div",{className:"text-center mt-4 text-sm text-gray-500 dark:text-gray-400",children:"Numbers show journal entries count for each day"})]})]}):(0,t.jsxs)(ej.default,{className:"p-8 text-center",children:[(0,t.jsx)(a.FiActivity,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Behavioral Data Available"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Start journaling and recording emotional states in trades to see behavioral insights"})]})},eN=({trades:e,detailed:s=!1})=>{let i=(0,r.useMemo)(()=>{if(0===e.length)return{totalTrades:0,winCount:0,lossCount:0,breakEvenCount:0,winRate:0,totalPnL:0,avgWin:0,avgLoss:0,largestWin:0,largestLoss:0,expectancy:0,profitFactor:0,consecutiveWins:0,consecutiveLosses:0,avgTradeDuration:0,bestPair:"",worstPair:"",bestSession:"",riskRewardRatio:0};let t=e.filter(e=>"closed"===e.status&&null!==e.profitLoss&&void 0!==e.profitLoss),r=t.filter(e=>e.profitLoss>0),a=t.filter(e=>e.profitLoss<0),s=t.filter(e=>0===e.profitLoss),i=t.reduce((e,t)=>e+(t.profitLoss||0),0),n=t.length>0?r.length/t.length*100:0,l=r.length>0?r.reduce((e,t)=>e+t.profitLoss,0)/r.length:0,o=a.length>0?a.reduce((e,t)=>e+t.profitLoss,0)/a.length:0,d=r.length>0?Math.max(...r.map(e=>e.profitLoss)):0,c=a.length>0?Math.min(...a.map(e=>e.profitLoss)):0,x=r.reduce((e,t)=>e+t.profitLoss,0),m=Math.abs(a.reduce((e,t)=>e+t.profitLoss,0)),g=0,h=0,p=0,u=0;for(let e of t)e.profitLoss>0?(u=0,g=Math.max(g,++p)):e.profitLoss<0?(p=0,h=Math.max(h,++u)):(p=0,u=0);let f=t.reduce((e,t)=>(e[t.pair]||(e[t.pair]={total:0,wins:0,losses:0,pnl:0}),e[t.pair].total++,e[t.pair].pnl+=t.profitLoss||0,t.profitLoss>0?e[t.pair].wins++:t.profitLoss<0&&e[t.pair].losses++,e),{}),y=Object.entries(f).sort(([,e],[,t])=>t.pnl-e.pnl)[0]?.[0]||"",j=Object.entries(f).sort(([,e],[,t])=>e.pnl-t.pnl)[0]?.[0]||"",b=t.reduce((e,t)=>{let r=t.session||"Unknown";return e[r]||(e[r]={total:0,wins:0,losses:0,pnl:0}),e[r].total++,e[r].pnl+=t.profitLoss||0,t.profitLoss>0?e[r].wins++:t.profitLoss<0&&e[r].losses++,e},{}),v=Object.entries(b).sort(([,e],[,t])=>t.pnl-e.pnl)[0]?.[0]||"",N=a.length>0&&0!==l?Math.abs(l/o):0;return{totalTrades:t.length,winCount:r.length,lossCount:a.length,breakEvenCount:s.length,winRate:n,totalPnL:i,avgWin:l,avgLoss:o,largestWin:d,largestLoss:c,expectancy:n>0&&0!==o?n/100*l+(100-n)/100*o:0,profitFactor:m>0?x/m:x>0?1/0:1,consecutiveWins:g,consecutiveLosses:h,avgTradeDuration:0,bestPair:y,worstPair:j,bestSession:v,riskRewardRatio:N}},[e]),n=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),l=e=>`${e.toFixed(1)}%`,o=({title:e,value:r,icon:s,color:i,trend:n})=>(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e}),(0,t.jsx)("p",{className:`text-2xl font-bold ${i}`,children:r})]}),(0,t.jsx)("div",{className:`p-3 rounded-full ${i.replace("text-","bg-").replace("-600","-100")} dark:${i.replace("text-","bg-").replace("-600","-900/20")}`,children:(0,t.jsx)(s,{className:`w-6 h-6 ${i}`})})]}),n&&(0,t.jsxs)("div",{className:"mt-2 flex items-center",children:["up"===n&&(0,t.jsx)(a.FiTrendingUp,{className:"w-4 h-4 text-green-500 mr-1"}),"down"===n&&(0,t.jsx)(a.FiTrendingDown,{className:"w-4 h-4 text-red-500 mr-1"}),(0,t.jsx)("span",{className:`text-sm ${"up"===n?"text-green-600":"down"===n?"text-red-600":"text-gray-600"}`,children:"up"===n?"Improving":"down"===n?"Declining":"Stable"})]})]});return 0===i.totalTrades?(0,t.jsxs)(ej.default,{className:"p-8 text-center",children:[(0,t.jsx)(a.FiBarChart,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Performance Data"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Complete some trades to see your performance metrics"})]}):s?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(o,{title:"Total P&L",value:n(i.totalPnL),icon:i.totalPnL>=0?a.FiTrendingUp:a.FiTrendingDown,color:i.totalPnL>=0?"text-green-600":"text-red-600"}),(0,t.jsx)(o,{title:"Win Rate",value:l(i.winRate),icon:a.FiTarget,color:"text-blue-600"}),(0,t.jsx)(o,{title:"Profit Factor",value:i.profitFactor===1/0?"∞":i.profitFactor.toFixed(2),icon:a.FiAward,color:i.profitFactor>=1.5?"text-green-600":"text-orange-600"}),(0,t.jsx)(o,{title:"Expectancy",value:n(i.expectancy),icon:a.FiDollarSign,color:i.expectancy>=0?"text-green-600":"text-red-600"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Trade Statistics"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Trades"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:i.totalTrades})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Winning Trades"}),(0,t.jsx)("span",{className:"font-semibold text-green-600",children:i.winCount})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Losing Trades"}),(0,t.jsx)("span",{className:"font-semibold text-red-600",children:i.lossCount})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Break-even Trades"}),(0,t.jsx)("span",{className:"font-semibold text-gray-600",children:i.breakEvenCount})]})]})]}),(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"P&L Breakdown"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Average Win"}),(0,t.jsx)("span",{className:"font-semibold text-green-600",children:n(i.avgWin)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Average Loss"}),(0,t.jsx)("span",{className:"font-semibold text-red-600",children:n(i.avgLoss)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Largest Win"}),(0,t.jsx)("span",{className:"font-semibold text-green-600",children:n(i.largestWin)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Largest Loss"}),(0,t.jsx)("span",{className:"font-semibold text-red-600",children:n(i.largestLoss)})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Performance Insights"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Risk-Reward Ratio"}),(0,t.jsxs)("span",{className:"font-semibold text-gray-900 dark:text-white",children:[i.riskRewardRatio.toFixed(2),":1"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Max Consecutive Wins"}),(0,t.jsx)("span",{className:"font-semibold text-green-600",children:i.consecutiveWins})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Max Consecutive Losses"}),(0,t.jsx)("span",{className:"font-semibold text-red-600",children:i.consecutiveLosses})]}),i.bestPair&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Best Performing Pair"}),(0,t.jsx)("span",{className:"font-semibold text-green-600",children:i.bestPair})]}),i.bestSession&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Best Session"}),(0,t.jsx)("span",{className:"font-semibold text-blue-600",children:i.bestSession})]})]})]}),(0,t.jsxs)(ej.default,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Performance Health"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Win Rate Health"}),(0,t.jsx)("span",{className:`font-medium ${i.winRate>=60?"text-green-600":i.winRate>=50?"text-yellow-600":"text-red-600"}`,children:i.winRate>=60?"Excellent":i.winRate>=50?"Good":"Needs Work"})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,t.jsx)(ey.motion.div,{initial:{width:0},animate:{width:`${Math.min(i.winRate,100)}%`},className:`h-2 rounded-full ${i.winRate>=60?"bg-green-500":i.winRate>=50?"bg-yellow-500":"bg-red-500"}`})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Profit Factor Health"}),(0,t.jsx)("span",{className:`font-medium ${i.profitFactor>=2?"text-green-600":i.profitFactor>=1.5?"text-yellow-600":"text-red-600"}`,children:i.profitFactor>=2?"Excellent":i.profitFactor>=1.5?"Good":"Needs Work"})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,t.jsx)(ey.motion.div,{initial:{width:0},animate:{width:`${Math.min(i.profitFactor/3*100,100)}%`},className:`h-2 rounded-full ${i.profitFactor>=2?"bg-green-500":i.profitFactor>=1.5?"bg-yellow-500":"bg-red-500"}`})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Risk-Reward Health"}),(0,t.jsx)("span",{className:`font-medium ${i.riskRewardRatio>=2?"text-green-600":i.riskRewardRatio>=1.5?"text-yellow-600":"text-red-600"}`,children:i.riskRewardRatio>=2?"Excellent":i.riskRewardRatio>=1.5?"Good":"Needs Work"})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,t.jsx)(ey.motion.div,{initial:{width:0},animate:{width:`${Math.min(i.riskRewardRatio/3*100,100)}%`},className:`h-2 rounded-full ${i.riskRewardRatio>=2?"bg-green-500":i.riskRewardRatio>=1.5?"bg-yellow-500":"bg-red-500"}`})})]})]})]})]})]}):(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(o,{title:"Total P&L",value:n(i.totalPnL),icon:i.totalPnL>=0?a.FiTrendingUp:a.FiTrendingDown,color:i.totalPnL>=0?"text-green-600":"text-red-600",trend:i.totalPnL>=0?"up":"down"}),(0,t.jsx)(o,{title:"Win Rate",value:l(i.winRate),icon:a.FiTarget,color:"text-blue-600",trend:i.winRate>=50?"up":"down"}),(0,t.jsx)(o,{title:"Profit Factor",value:i.profitFactor===1/0?"∞":i.profitFactor.toFixed(2),icon:a.FiAward,color:i.profitFactor>=1.5?"text-green-600":"text-orange-600",trend:i.profitFactor>=1.5?"up":"down"}),(0,t.jsx)(o,{title:"Total Trades",value:i.totalTrades,icon:a.FiActivity,color:"text-purple-600"})]})};var ew=e.i(9876),ek=e.i(5766);function eS(){let{theme:e,toggleTheme:i}=(0,ew.useTheme)(),[n]=(0,r.useState)(()=>!0),[l,o]=(0,r.useState)("overview"),[d,c]=(0,r.useState)([]),[x,m]=(0,r.useState)([]),[g,h]=(0,r.useState)([]),[p,u]=(0,r.useState)(!0),[f,y]=(0,r.useState)(null),[j,b]=(0,r.useState)({start:null,end:null}),[v,N]=(0,r.useState)({strategyId:"",pair:"",session:"",emotionalState:""});(0,r.useEffect)(()=>{n&&w()},[n]);let w=async()=>{try{let e;u(!0),y(null);let t=await fetch("/api/trades",{headers:{"x-user-id":"demo-user"}});if(!t.ok)throw Error("Failed to load trades");let r=await t.json();e=r&&"object"==typeof r&&"data"in r?r.data:r,c(Array.isArray(e)?e:[]);let a=await fetch("/api/strategies",{headers:{"x-user-id":"demo-user"}});if(a.ok){let e,t=await a.json();e=t&&"object"==typeof t&&"data"in t?t.data:t,m(Array.isArray(e)?e:[])}let s=await fetch("/api/journal",{headers:{"x-user-id":"demo-user"}});if(s.ok){let e=await s.json();h(Array.isArray(e)?e:[])}}catch(e){console.error("Error loading analytics data:",e),y("Failed to load analytics data")}finally{u(!1)}},k=d.filter(e=>(!v.strategyId||e.strategyId===v.strategyId)&&(!v.pair||e.pair===v.pair)&&(!v.session||e.session===v.session)&&(!v.emotionalState||e.emotionalState===v.emotionalState)),S=[{id:"overview",label:"Overview",icon:a.FiBarChart},{id:"performance",label:"Performance",icon:a.FiTrendingUp},{id:"strategies",label:"Strategies",icon:a.FiTarget},{id:"behavioral",label:"Behavioral",icon:a.FiZap}];return n?(0,t.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"var(--background)"},children:[(0,t.jsx)(s.default,{onThemeToggle:i,currentTheme:e}),(0,t.jsxs)("main",{style:{maxWidth:"1200px",margin:"0 auto",padding:"32px 16px"},children:[(0,t.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,t.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",color:"var(--text-primary)",marginBottom:"8px",margin:0},children:"Analytics Dashboard"}),(0,t.jsx)("p",{style:{fontSize:"14px",color:"var(--text-secondary)",margin:0},children:"Comprehensive trading performance, strategy analysis, and behavioral insights"})]}),(0,t.jsx)("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"flex-end"},children:(0,t.jsxs)("button",{onClick:()=>{let e=new Blob([JSON.stringify({trades:k,strategies:x,journalEntries:g,filters:v,dateRange:j,exportedAt:new Date().toISOString()},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=`trading-analytics-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),ek.default.success("Analytics data exported")},style:{background:"linear-gradient(135deg, var(--purple-base) 0%, var(--purple-dark) 100%)",color:"white",padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"600",fontSize:"14px",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(139, 92, 246, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[(0,t.jsx)(a.FiDownload,{size:16}),"Export Data"]})}),(0,t.jsx)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px",marginBottom:"24px"},children:(0,t.jsx)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:S.map(e=>{let r=e.icon;return(0,t.jsxs)("button",{onClick:()=>o(e.id),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 16px",borderRadius:"8px",border:"none",backgroundColor:l===e.id?"var(--purple-base)":"transparent",color:l===e.id?"white":"var(--text-secondary)",cursor:"pointer",fontWeight:"600",fontSize:"14px",transition:"all 0.2s ease"},onMouseEnter:t=>{l!==e.id&&(t.currentTarget.style.backgroundColor="var(--panel-muted)")},onMouseLeave:t=>{l!==e.id&&(t.currentTarget.style.backgroundColor="transparent")},children:[(0,t.jsx)(r,{size:16}),e.label]},e.id)})})}),(0,t.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px",marginBottom:"24px"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[(0,t.jsx)(a.FiFilter,{size:16,style:{color:"var(--text-secondary)"}}),(0,t.jsx)("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text-primary)"},children:"Filters"})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"var(--text-secondary)",marginBottom:"4px"},children:"Strategy"}),(0,t.jsxs)("select",{value:v.strategyId,onChange:e=>N(t=>({...t,strategyId:e.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid var(--card-border)",backgroundColor:"var(--panel-muted)",color:"var(--text-primary)",fontSize:"14px"},children:[(0,t.jsx)("option",{value:"",children:"All Strategies"}),x.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"var(--text-secondary)",marginBottom:"4px"},children:"Currency Pair"}),(0,t.jsxs)("select",{value:v.pair,onChange:e=>N(t=>({...t,pair:e.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid var(--card-border)",backgroundColor:"var(--panel-muted)",color:"var(--text-primary)",fontSize:"14px"},children:[(0,t.jsx)("option",{value:"",children:"All Pairs"}),Array.from(new Set(d.map(e=>e.pair))).map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"var(--text-secondary)",marginBottom:"4px"},children:"Session"}),(0,t.jsxs)("select",{value:v.session,onChange:e=>N(t=>({...t,session:e.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid var(--card-border)",backgroundColor:"var(--panel-muted)",color:"var(--text-primary)",fontSize:"14px"},children:[(0,t.jsx)("option",{value:"",children:"All Sessions"}),Array.from(new Set(d.map(e=>e.session).filter(Boolean))).map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"600",color:"var(--text-secondary)",marginBottom:"4px"},children:"Emotional State"}),(0,t.jsxs)("select",{value:v.emotionalState,onChange:e=>N(t=>({...t,emotionalState:e.target.value})),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid var(--card-border)",backgroundColor:"var(--panel-muted)",color:"var(--text-primary)",fontSize:"14px"},children:[(0,t.jsx)("option",{value:"",children:"All States"}),Array.from(new Set(d.map(e=>e.emotionalState).filter(Boolean))).map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"24px"},children:["overview"===l&&(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px"},children:[(0,t.jsx)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px"},children:(0,t.jsx)(ep,{trades:k})}),(0,t.jsx)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px"},children:(0,t.jsx)(eu,{trades:k})}),(0,t.jsx)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px"},children:(0,t.jsx)(ef,{trades:k})})]}),"performance"===l&&(0,t.jsx)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px"},children:(0,t.jsx)(eN,{trades:k})}),"strategies"===l&&(0,t.jsx)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px"},children:(0,t.jsx)(eb,{trades:k,strategies:x})}),"behavioral"===l&&(0,t.jsx)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px"},children:(0,t.jsx)(ev,{trades:k,journalEntries:g})})]})]}),(0,t.jsx)(ek.Toaster,{position:"bottom-right"})]}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900"})}e.s(["default",()=>eS],96673)}]);