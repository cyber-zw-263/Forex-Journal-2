(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3510,e=>{"use strict";var r=e.i(43476),t=e.i(71645),o=e.i(9876),a=e.i(5766),n=e.i(92199);function i(){let{theme:e,toggleTheme:i}=(0,o.useTheme)(),[s,l]=(0,t.useState)(()=>!0),[d,p]=(0,t.useState)([]),[c,x]=(0,t.useState)(new Date),[g,u]=(0,t.useState)(null);(0,t.useEffect)(()=>{s&&(async()=>{try{let e=await fetch("/api/trades",{headers:{"x-user-id":"demo-user"}});if(!e.ok){let r=null;try{r=await e.json()}catch(t){r=await e.text()}console.error("Failed to fetch trades:",e.status,r),p([]);return}let r=await e.json();if(!Array.isArray(r)){console.warn("Unexpected trades payload in calendar page",r),p([]);return}p(r)}catch(e){console.error("Error fetching trades:",e)}})()},[s]);let h=(0,t.useMemo)(()=>{let e={};return d.forEach(r=>{let t=new Date(r.entryTime).toISOString().split("T")[0];e[t]||(e[t]=[]),e[t].push(r)}),e},[d]),y=Array.from({length:new Date(c.getFullYear(),c.getMonth()+1,0).getDate()},(e,r)=>r+1),b=[...Array.from({length:new Date(c.getFullYear(),c.getMonth(),1).getDay()},(e,r)=>null),...y],f=g&&h[g]||[];return s?(0,r.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"var(--background)"},children:[(0,r.jsxs)("main",{style:{maxWidth:"1200px",margin:"0 auto",padding:"32px 16px"},children:[(0,r.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,r.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",color:"var(--text-primary)",marginBottom:"8px",margin:0},children:"Trading Calendar"}),(0,r.jsx)("p",{style:{fontSize:"14px",color:"var(--text-secondary)",margin:0},children:"View your trades by day"})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px"},children:[(0,r.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px",gap:"12px"},children:[(0,r.jsx)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",margin:0},children:c.toLocaleString("default",{month:"long",year:"numeric"})}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,r.jsx)("button",{onClick:()=>x(new Date(c.getFullYear(),c.getMonth()-1)),style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"6px",border:"1px solid var(--card-border)",backgroundColor:"transparent",color:"var(--text-primary)",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.borderColor="var(--purple-base)",e.currentTarget.style.boxShadow="0 0 0 2px rgba(139, 92, 246, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--card-border)",e.currentTarget.style.boxShadow="none"},"aria-label":"Previous month",children:(0,r.jsx)(n.FiChevronLeft,{size:16})}),(0,r.jsx)("button",{onClick:()=>x(new Date),style:{background:"linear-gradient(135deg, var(--purple-base) 0%, var(--purple-dark) 100%)",color:"white",padding:"6px 12px",borderRadius:"6px",border:"none",cursor:"pointer",fontWeight:"600",fontSize:"12px",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(139, 92, 246, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:"Today"}),(0,r.jsx)("button",{onClick:()=>x(new Date(c.getFullYear(),c.getMonth()+1)),style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"6px",border:"1px solid var(--card-border)",backgroundColor:"transparent",color:"var(--text-primary)",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.borderColor="var(--purple-base)",e.currentTarget.style.boxShadow="0 0 0 2px rgba(139, 92, 246, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--card-border)",e.currentTarget.style.boxShadow="none"},"aria-label":"Next month",children:(0,r.jsx)(n.FiChevronRight,{size:16})})]})]}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"12px"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,r.jsx)("div",{style:{textAlign:"center",fontWeight:"600",color:"var(--text-secondary)",fontSize:"11px",padding:"6px"},children:e},e))}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},children:b.map((e,t)=>{let o,a,n;if(null===e)return(0,r.jsx)("div",{},`empty-${t}`);let i=new Date(c.getFullYear(),c.getMonth(),e).toISOString().split("T")[0],s=(a=(o=h[new Date(c.getFullYear(),c.getMonth(),e).toISOString().split("T")[0]]||[]).reduce((e,r)=>e+(r.profitLoss||0),0),n=o.filter(e=>"WIN"===e.outcome).length,{count:o.length,pnl:a,wins:n}),l=g===i,d="transparent",p="var(--text-secondary)",x="var(--card-border)";return l?(d="var(--purple-base)",p="white",x="var(--purple-base)"):s.count>0?s.pnl>=0?(d="rgba(34, 197, 94, 0.1)",p="#22c55e",x="rgba(34, 197, 94, 0.3)"):(d="rgba(239, 68, 68, 0.1)",p="#ef4444",x="rgba(239, 68, 68, 0.3)"):(d="var(--panel-muted)",p="var(--text-secondary)",x="transparent"),(0,r.jsxs)("button",{onClick:()=>u(l?null:i),style:{aspectRatio:"1",padding:"6px",borderRadius:"6px",border:`1px solid ${x}`,backgroundColor:d,color:p,cursor:"pointer",fontSize:"12px",fontWeight:"600",transition:"all 0.2s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"48px"},onMouseEnter:e=>{l||0!==s.count||(e.currentTarget.style.borderColor="var(--purple-base)")},onMouseLeave:e=>{e.currentTarget.style.borderColor=x},children:[(0,r.jsx)("div",{children:e}),s.count>0&&(0,r.jsxs)("div",{style:{fontSize:"9px",marginTop:"2px"},children:[s.count," ",1===s.count?"T":"Ts"]})]},e)})}),(0,r.jsxs)("div",{style:{marginTop:"20px",paddingTop:"16px",borderTop:"1px solid var(--card-border)",display:"flex",gap:"16px",flexWrap:"wrap"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("div",{style:{width:"12px",height:"12px",backgroundColor:"rgba(34, 197, 94, 0.2)",border:"1px solid rgba(34, 197, 94, 0.4)",borderRadius:"4px"}}),(0,r.jsx)("span",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:"Winning Day"})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("div",{style:{width:"12px",height:"12px",backgroundColor:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"4px"}}),(0,r.jsx)("span",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:"Losing Day"})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("div",{style:{width:"12px",height:"12px",backgroundColor:"var(--panel-muted)",border:"1px solid var(--card-border)",borderRadius:"4px"}}),(0,r.jsx)("span",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:"No Trades"})]})]})]}),(0,r.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"20px",maxHeight:"fit-content"},children:[(0,r.jsx)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"16px",margin:0},children:g?new Date(g+"T00:00:00").toLocaleDateString():"Select a date"}),f.length>0?(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:f.map(e=>(0,r.jsxs)("div",{style:{backgroundColor:"var(--panel-muted)",padding:"12px",borderRadius:"8px",borderLeft:`3px solid ${e.profitLoss&&e.profitLoss>=0?"#22c55e":"#ef4444"}`},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{fontWeight:"600",color:"var(--text-primary)",fontSize:"13px"},children:e.pair}),(0,r.jsx)("span",{style:{fontSize:"11px",fontWeight:"600",padding:"3px 8px",borderRadius:"4px",backgroundColor:"WIN"===e.outcome?"rgba(34, 197, 94, 0.15)":"rgba(239, 68, 68, 0.15)",color:"WIN"===e.outcome?"#22c55e":"#ef4444"},children:e.outcome||"Open"})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"12px",color:"var(--text-secondary)"},children:[(0,r.jsx)("span",{children:e.direction}),(0,r.jsx)("span",{style:{color:e.profitLoss&&e.profitLoss>=0?"#22c55e":"#ef4444",fontWeight:"600"},children:void 0!==e.profitLoss?`${e.profitLoss>=0?"+":""}${e.profitLoss.toFixed(2)}`:"N/A"})]})]},e.id))}):(0,r.jsx)("p",{style:{fontSize:"13px",color:"var(--text-secondary)",margin:0},children:g?"No trades on this date":"Select a date to view trades"})]})]})]}),(0,r.jsx)(a.Toaster,{position:"bottom-right"})]}):(0,r.jsx)("div",{style:{minHeight:"100vh",backgroundColor:"var(--background)"}})}e.s(["default",()=>i])}]);