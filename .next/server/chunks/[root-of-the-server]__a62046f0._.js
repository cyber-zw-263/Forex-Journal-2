module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},63021,(e,t,r)=>{t.exports=e.x("@prisma/client-2c3a283f134fdcb6",()=>require("@prisma/client-2c3a283f134fdcb6"))},98043,e=>{"use strict";var t=e.i(63021);let r=null;try{let e=(process.env.DATABASE_URL||"").trim(),n=e.startsWith("file:"),o=e.startsWith("postgres")||e.startsWith("postgresql:");e&&(n||o)?r=function(){try{let e=new t.PrismaClient;return e.$connect().catch(e=>{console.warn("Prisma client connection failed during initialization:",e?.message||e)}),e}catch(e){return console.warn("Failed to create Prisma client:",e),null}}():console.warn("Prisma disabled: DATABASE_URL not set to sqlite or postgres. API routes should handle missing DB.")}catch(e){console.warn("Prisma initialization error:",e),r=null}async function n(){try{r&&await r.$disconnect()}catch(e){console.warn("Error disconnecting Prisma:",e)}}"undefined"!=typeof process&&process.on?.("SIGINT",async()=>{await n(),process.exit(0)}),e.s(["prisma",()=>r])},15045,e=>{"use strict";var t=e.i(47909),r=e.i(74017),n=e.i(96250),o=e.i(59756),a=e.i(61916),i=e.i(74677),s=e.i(69741),l=e.i(16795),d=e.i(87718),c=e.i(95169),u=e.i(47587),p=e.i(66012),m=e.i(70101),h=e.i(26937),f=e.i(10372),g=e.i(93695);e.i(52474);var x=e.i(220),v=e.i(89171),R=e.i(98043);async function y(e){try{let t,{tradeId:r}=await e.json();if(!r)return v.NextResponse.json({error:"Trade ID is required"},{status:400});let n=await R.prisma.trade.findUnique({where:{id:r}});if(!n)return v.NextResponse.json({error:"Trade not found"},{status:404});let o=function(e){if(!e.emotionalDrift)return null;try{let t=JSON.parse(e.emotionalDrift);return{preTradeEmotion:{emotion:t.preTradeEmotion||"neutral",intensity:t.preTradeIntensity||5,timestamp:new Date(e.entryTime)},postTradeEmotion:{emotion:t.postTradeEmotion||t.preTradeEmotion||"neutral",intensity:t.postTradeIntensity||t.preTradeIntensity||5,timestamp:new Date(e.exitTime||e.entryTime)},tradeOutcome:"profit"===e.outcome?"profit":"loss",tradeSize:e.positionSize||e.riskAmount||0,timeToRecover:t.timeToRecover||0,stressLevel:t.stressLevel||5}}catch(e){return console.error("Error parsing emotional drift:",e),null}}(n);if(!o)return v.NextResponse.json({error:"No emotional data available for this trade",tradeId:r},{status:400});let a=function(e){let t=0,r=0,n=0,o=0,a=[],{preTradeEmotion:i,postTradeEmotion:s,tradeOutcome:l,tradeSize:d,timeToRecover:c,stressLevel:u}=e;["anxious","frustrated","angry","fearful","overconfident"].includes(i.emotion)?(t+=30,o+=2*i.intensity,a.push("Consider waiting for better emotional state before trading")):["calm","confident","neutral"].includes(i.emotion)&&(t+=10,o+=.5*i.intensity);let p=s.intensity-i.intensity;return p>3?(t+=25,r+=15,o+=3*p,a.push("Significant emotional escalation - review trade management")):p<-2&&(t+=15,a.push("Emotional improvement after trade - positive sign")),"loss"===l?(t+=20,r+=10,("frustrated"===s.emotion||"angry"===s.emotion)&&(t+=15,r+=20,o+=15,a.push("Loss combined with negative emotion - high risk of revenge trading"))):("overconfident"===s.emotion||"euphoric"===s.emotion)&&(t+=10,r+=15,a.push("Winning trade euphoria - watch for overconfidence in next trades")),d>100&&(t*=1.3,r*=1.2,o*=1.4,a.push("Large position size increased emotional impact")),(n=c||0)>24?(r+=20,a.push("Extended recovery time indicates significant emotional impact")):n<1&&a.push("Quick emotional recovery - good resilience"),o+=2*u,u>7&&(t+=15,r+=10,a.push("High stress during trade - consider break or smaller positions")),{immediateCost:t=Math.min(100,Math.max(0,Math.round(t))),longTermCost:r=Math.min(100,Math.max(0,Math.round(r))),recoveryTime:n,stressAccumulation:o=Math.round(o),recommendations:a}}(o),i=(t=[],a.immediateCost>=70?t.push("üö® Extremely high immediate emotional cost - consider taking a break"):a.immediateCost>=50?t.push("‚ö†Ô∏è High immediate emotional cost - monitor closely"):a.immediateCost<=20&&t.push("‚úÖ Low immediate emotional cost - good emotional control"),a.longTermCost>=60?t.push("üî¥ Significant long-term emotional damage - review trading approach"):a.longTermCost>=30&&t.push("üü° Moderate long-term emotional impact - track recovery"),a.stressAccumulation>=50&&t.push("üíî High stress accumulation - risk of burnout"),a.recoveryTime>48?t.push("‚è∞ Very long recovery time - emotional resilience needs work"):a.recoveryTime<2&&t.push("‚ö° Fast emotional recovery - good psychological resilience"),t);return await R.prisma.trade.update({where:{id:r},data:{emotionalCost:a.immediateCost}}),v.NextResponse.json({success:!0,tradeId:r,emotionalCost:a,insights:i,factors:o})}catch(e){return console.error("Error calculating emotional cost:",e),v.NextResponse.json({error:"Failed to calculate emotional cost"},{status:500})}}async function w(e){try{let{searchParams:t}=new URL(e.url),r=t.get("tradeId");if(!r)return v.NextResponse.json({error:"Trade ID is required"},{status:400});let n=await R.prisma.trade.findUnique({where:{id:r},select:{id:!0,emotionalCost:!0,emotionalDrift:!0,outcome:!0}});if(!n)return v.NextResponse.json({error:"Trade not found"},{status:404});return v.NextResponse.json({tradeId:n.id,emotionalCost:n.emotionalCost,hasEmotionalData:!!n.emotionalDrift,outcome:n.outcome})}catch(e){return console.error("Error fetching emotional cost:",e),v.NextResponse.json({error:"Failed to fetch emotional cost"},{status:500})}}e.s(["GET",()=>w,"POST",()=>y],22687);var E=e.i(22687);let T=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/emotional-cost/route",pathname:"/api/emotional-cost",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/emotional-cost/route.ts",nextConfigOutput:"",userland:E}),{workAsyncStorage:C,workUnitAsyncStorage:A,serverHooks:b}=T;function N(){return(0,n.patchFetch)({workAsyncStorage:C,workUnitAsyncStorage:A})}async function P(e,t,n){T.isDev&&(0,o.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/api/emotional-cost/route";v=v.replace(/\/index$/,"")||"/";let R=await T.prepare(e,t,{srcPage:v,multiZoneDraftMode:!1});if(!R)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:y,params:w,nextConfig:E,parsedUrl:C,isDraftMode:A,prerenderManifest:b,routerServerContext:N,isOnDemandRevalidate:P,revalidateOnlyGenerated:k,resolvedPathname:S,clientReferenceManifest:j,serverActionsManifest:q}=R,D=(0,s.normalizeAppPath)(v),I=!!(b.dynamicRoutes[D]||b.routes[S]),O=async()=>((null==N?void 0:N.render404)?await N.render404(e,t,C,!1):t.end("This page could not be found"),null);if(I&&!A){let e=!!b.routes[S],t=b.dynamicRoutes[D];if(t&&!1===t.fallback&&!e){if(E.experimental.adapterPath)return await O();throw new g.NoFallbackError}}let _=null;!I||T.isDev||A||(_="/index"===(_=S)?"/":_);let U=!0===T.isDev||!I,H=I&&!U;q&&j&&(0,i.setManifestsSingleton)({page:v,clientReferenceManifest:j,serverActionsManifest:q});let M=e.method||"GET",L=(0,a.getTracer)(),F=L.getActiveScopeSpan(),$={params:w,prerenderManifest:b,renderOpts:{experimental:{authInterrupts:!!E.experimental.authInterrupts},cacheComponents:!!E.cacheComponents,supportsDynamicResponse:U,incrementalCache:(0,o.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:E.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n,o)=>T.onRequestError(e,t,n,o,N)},sharedContext:{buildId:y}},B=new l.NodeNextRequest(e),K=new l.NodeNextResponse(t),z=d.NextRequestAdapter.fromNodeNextRequest(B,(0,d.signalFromNodeResponse)(t));try{let i=async e=>T.handle(z,$).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=L.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${M} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${M} ${v}`)}),s=!!(0,o.getRequestMeta)(e,"minimalMode"),l=async o=>{var a,l;let d=async({previousCacheEntry:r})=>{try{if(!s&&P&&k&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let a=await i(o);e.fetchMetrics=$.renderOpts.fetchMetrics;let l=$.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let d=$.renderOpts.collectedTags;if(!I)return await (0,p.sendResponse)(B,K,a,$.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(a.headers);d&&(t[f.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==$.renderOpts.collectedRevalidate&&!($.renderOpts.collectedRevalidate>=f.INFINITE_CACHE)&&$.renderOpts.collectedRevalidate,n=void 0===$.renderOpts.collectedExpire||$.renderOpts.collectedExpire>=f.INFINITE_CACHE?void 0:$.renderOpts.collectedExpire;return{value:{kind:x.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==r?void 0:r.isStale)&&await T.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:H,isOnDemandRevalidate:P})},!1,N),t}},c=await T.handleResponse({req:e,nextConfig:E,cacheKey:_,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:b,isRoutePPREnabled:!1,isOnDemandRevalidate:P,revalidateOnlyGenerated:k,responseGenerator:d,waitUntil:n.waitUntil,isMinimalMode:s});if(!I)return null;if((null==c||null==(a=c.value)?void 0:a.kind)!==x.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(l=c.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",P?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),A&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let g=(0,m.fromNodeOutgoingHttpHeaders)(c.value.headers);return s&&I||g.delete(f.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||g.get("Cache-Control")||g.set("Cache-Control",(0,h.getCacheControlHeader)(c.cacheControl)),await (0,p.sendResponse)(B,K,new Response(c.value.body,{headers:g,status:c.value.status||200})),null};F?await l(F):await L.withPropagatedContext(e.headers,()=>L.trace(c.BaseServerSpan.handleRequest,{spanName:`${M} ${v}`,kind:a.SpanKind.SERVER,attributes:{"http.method":M,"http.target":e.url}},l))}catch(t){if(t instanceof g.NoFallbackError||await T.onRequestError(e,t,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:H,isOnDemandRevalidate:P})},!1,N),I)throw t;return await (0,p.sendResponse)(B,K,new Response(null,{status:500})),null}}e.s(["handler",()=>P,"patchFetch",()=>N,"routeModule",()=>T,"serverHooks",()=>b,"workAsyncStorage",()=>C,"workUnitAsyncStorage",()=>A],15045)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a62046f0._.js.map