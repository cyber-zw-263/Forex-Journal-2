{"version":3,"sources":["../../../../src/app/review/page.tsx","../../../../src/components/VoiceRecorder.tsx","../../../../src/components/ScreenshotUploader.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport VoiceRecorder from '@/components/VoiceRecorder';\r\nimport ScreenshotUploader from '@/components/ScreenshotUploader';\r\nimport { useTheme } from '@/context/ThemeContext';\r\nimport { Toaster } from 'react-hot-toast';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport default function TradeReviewPage() {\r\n  const { theme, toggleTheme } = useTheme();\r\n  const [mounted] = useState(() => typeof window !== 'undefined');\r\n  const [selectedTradeId, setSelectedTradeId] = useState<string | null>(null);\r\n  const [trades, setTrades] = useState<any[]>([]);\r\n  const [reviewData, setReviewData] = useState({\r\n    whatLearned: '',\r\n    mistakes: [] as string[],\r\n    emotionalState: 'calm',\r\n    setupQuality: 3,\r\n  });\r\n  const [currentMistake, setCurrentMistake] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (!mounted) return;\r\n\r\n    const fetchTrades = async () => {\r\n      try {\r\n        const response = await fetch('/api/trades', {\r\n          headers: {\r\n            'x-user-id': 'demo-user',\r\n          },\r\n        });\r\n\r\n        if (!response.ok) {\r\n          let errBody: unknown = null;\r\n          try { errBody = await response.json(); } catch (e) { errBody = await response.text(); }\r\n          console.error('Failed to fetch trades:', response.status, errBody);\r\n          setTrades([]);\r\n          return;\r\n        }\r\n\r\n        const data = await response.json();\r\n        if (!Array.isArray(data)) {\r\n          console.warn('Unexpected trades payload in review page', data);\r\n          setTrades([]);\r\n          return;\r\n        }\r\n\r\n        setTrades(data);\r\n      } catch (error) {\r\n        console.error('Error fetching trades:', error);\r\n      }\r\n    };\r\n\r\n    fetchTrades();\r\n  }, [mounted]);\r\n\r\n  const selectedTrade = trades.find(t => t.id === selectedTradeId);\r\n\r\n  const mistakeOptions = [\r\n    'Overtraded',\r\n    'Broke rules',\r\n    'Wrong entry point',\r\n    'Hesitated on trade',\r\n    'Exited too early',\r\n    'Exited too late',\r\n    'Ignored analysis',\r\n    'Bad position sizing',\r\n    'Emotion-driven',\r\n  ];\r\n\r\n  const toggleMistake = (mistake: string) => {\r\n    setReviewData(prev => ({\r\n      ...prev,\r\n      mistakes: prev.mistakes.includes(mistake)\r\n        ? prev.mistakes.filter(m => m !== mistake)\r\n        : [...prev.mistakes, mistake],\r\n    }));\r\n  };\r\n\r\n  const saveReview = async () => {\r\n    if (!selectedTrade) return;\r\n\r\n    try {\r\n      const response = await fetch(`/api/trades/${selectedTrade.id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-id': 'demo-user',\r\n        },\r\n        body: JSON.stringify({\r\n          whatLearned: reviewData.whatLearned,\r\n          mistakes: JSON.stringify(reviewData.mistakes),\r\n          emotionalState: reviewData.emotionalState,\r\n          setupQuality: reviewData.setupQuality,\r\n        }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        toast.success('Review saved');\r\n        setSelectedTradeId(null);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Failed to save review');\r\n    }\r\n  };\r\n\r\n  if (!mounted) {\r\n    return <div style={{ minHeight: '100vh', backgroundColor: 'var(--background)' }} />;\r\n  }\r\n\r\n  return (\r\n    <div style={{ minHeight: '100vh', backgroundColor: 'var(--background)' }}>\r\n      <main style={{ maxWidth: '1200px', margin: '0 auto', padding: '32px 16px' }}>\r\n        <div style={{ marginBottom: '32px' }}>\r\n          <h1 style={{ fontSize: '28px', fontWeight: '700', color: 'var(--text-primary)', marginBottom: '8px', margin: 0 }}>\r\n            Trade Reviews\r\n          </h1>\r\n          <p style={{ fontSize: '14px', color: 'var(--text-secondary)', margin: 0 }}>Deep dive into your trades and learn from them</p>\r\n        </div>\r\n\r\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '24px' }}>\r\n          {/* Trades List */}\r\n          <div style={{ backgroundColor: 'var(--card-bg)', border: '1px solid var(--card-border)', borderRadius: '12px', padding: '20px' }}>\r\n            <h2 style={{ fontSize: '16px', fontWeight: '600', color: 'var(--text-primary)', marginBottom: '16px', margin: 0 }}>Recent Trades</h2>\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '8px', maxHeight: '500px', overflowY: 'auto' }}>\r\n              {trades.length > 0 ? (\r\n                trades.map(trade => (\r\n                  <button\r\n                    key={trade.id}\r\n                    onClick={() => {\r\n                      setSelectedTradeId(trade.id);\r\n                      setReviewData({\r\n                        whatLearned: trade.whatLearned || '',\r\n                        mistakes: trade.mistakes ? JSON.parse(trade.mistakes) : [],\r\n                        emotionalState: trade.emotionalState || 'calm',\r\n                        setupQuality: trade.setupQuality || 3,\r\n                      });\r\n                    }}\r\n                    style={{\r\n                      width: '100%',\r\n                      textAlign: 'left',\r\n                      padding: '12px',\r\n                      borderRadius: '8px',\r\n                      border: 'none',\r\n                      backgroundColor: selectedTradeId === trade.id ? 'var(--purple-base)' : 'var(--panel-muted)',\r\n                      color: selectedTradeId === trade.id ? 'white' : 'var(--text-primary)',\r\n                      cursor: 'pointer',\r\n                      transition: 'all 0.2s ease',\r\n                      fontSize: '13px',\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                      if (selectedTradeId !== trade.id) {\r\n                        e.currentTarget.style.backgroundColor = 'var(--card-border)';\r\n                      }\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      if (selectedTradeId !== trade.id) {\r\n                        e.currentTarget.style.backgroundColor = 'var(--panel-muted)';\r\n                      }\r\n                    }}\r\n                  >\r\n                    <div style={{ fontWeight: '600', marginBottom: '4px' }}>{trade.pair}</div>\r\n                    <div style={{ fontSize: '11px', opacity: 0.75 }}>\r\n                      {new Date(trade.entryTime).toLocaleDateString()}\r\n                    </div>\r\n                  </button>\r\n                ))\r\n              ) : (\r\n                <p style={{ fontSize: '13px', color: 'var(--text-secondary)', textAlign: 'center', padding: '16px', margin: 0 }}>\r\n                  No trades yet\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Review Form */}\r\n          {selectedTrade ? (\r\n            <div style={{ gridColumn: 'auto / span 2', display: 'flex', flexDirection: 'column', gap: '24px' }}>\r\n              {/* Trade Summary */}\r\n              <div style={{ backgroundColor: 'var(--card-bg)', border: '1px solid var(--card-border)', borderRadius: '12px', padding: '20px' }}>\r\n                <h2 style={{ fontSize: '16px', fontWeight: '600', color: 'var(--text-primary)', marginBottom: '16px', margin: 0 }}>\r\n                  {selectedTrade.pair} - {selectedTrade.direction}\r\n                </h2>\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '16px', fontSize: '13px' }}>\r\n                  <div>\r\n                    <p style={{ color: 'var(--text-secondary)', margin: 0, marginBottom: '4px' }}>Entry</p>\r\n                    <p style={{ fontWeight: '600', color: 'var(--text-primary)', margin: 0 }}>\r\n                      {selectedTrade.entryPrice.toFixed(5)}\r\n                    </p>\r\n                  </div>\r\n                  <div>\r\n                    <p style={{ color: 'var(--text-secondary)', margin: 0, marginBottom: '4px' }}>Exit</p>\r\n                    <p style={{ fontWeight: '600', color: 'var(--text-primary)', margin: 0 }}>\r\n                      {selectedTrade.exitPrice?.toFixed(5) || 'Open'}\r\n                    </p>\r\n                  </div>\r\n                  <div>\r\n                    <p style={{ color: 'var(--text-secondary)', margin: 0, marginBottom: '4px' }}>P&L</p>\r\n                    <p style={{ fontWeight: '600', color: selectedTrade.profitLoss >= 0 ? 'var(--win-color)' : 'var(--loss-color)', margin: 0 }}>\r\n                      {selectedTrade.profitLoss?.toFixed(2) || 'N/A'}\r\n                    </p>\r\n                  </div>\r\n                  <div>\r\n                    <p style={{ color: 'var(--text-secondary)', margin: 0, marginBottom: '4px' }}>Outcome</p>\r\n                    <p style={{ fontWeight: '600', color: 'var(--text-primary)', margin: 0 }}>\r\n                      {selectedTrade.outcome || 'Open'}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Review Fields */}\r\n              <div style={{ backgroundColor: 'var(--card-bg)', border: '1px solid var(--card-border)', borderRadius: '12px', padding: '20px' }}>\r\n                <h3 style={{ fontSize: '16px', fontWeight: '600', color: 'var(--text-primary)', marginBottom: '16px', margin: 0 }}>Review Details</h3>\r\n\r\n                {/* What I Learned */}\r\n                <div style={{ marginBottom: '16px' }}>\r\n                  <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: 'var(--text-primary)', marginBottom: '8px' }}>\r\n                    What I Learned\r\n                  </label>\r\n                  <textarea\r\n                    value={reviewData.whatLearned}\r\n                    onChange={(e) =>\r\n                      setReviewData(prev => ({ ...prev, whatLearned: e.target.value }))\r\n                    }\r\n                    placeholder=\"What did this trade teach you?\"\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '12px',\r\n                      border: '1px solid var(--card-border)',\r\n                      borderRadius: '6px',\r\n                      backgroundColor: 'var(--panel-muted)',\r\n                      color: 'var(--text-primary)',\r\n                      fontSize: '13px',\r\n                      outline: 'none',\r\n                      resize: 'vertical',\r\n                      minHeight: '80px',\r\n                      fontFamily: 'inherit',\r\n                    }}\r\n                    onFocus={(e) => { e.currentTarget.style.borderColor = 'var(--purple-base)'; }}\r\n                    onBlur={(e) => { e.currentTarget.style.borderColor = 'var(--card-border)'; }}\r\n                  />\r\n                </div>\r\n\r\n                {/* Emotional State */}\r\n                <div style={{ marginBottom: '16px' }}>\r\n                  <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: 'var(--text-primary)', marginBottom: '8px' }}>\r\n                    Emotional State\r\n                  </label>\r\n                  <select\r\n                    value={reviewData.emotionalState}\r\n                    onChange={(e) =>\r\n                      setReviewData(prev => ({ ...prev, emotionalState: e.target.value }))\r\n                    }\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '8px 12px',\r\n                      border: '1px solid var(--card-border)',\r\n                      borderRadius: '6px',\r\n                      backgroundColor: 'var(--panel-muted)',\r\n                      color: 'var(--text-primary)',\r\n                      fontSize: '13px',\r\n                      outline: 'none',\r\n                    }}\r\n                    onFocus={(e) => { e.currentTarget.style.borderColor = 'var(--purple-base)'; }}\r\n                    onBlur={(e) => { e.currentTarget.style.borderColor = 'var(--card-border)'; }}\r\n                  >\r\n                    <option>calm</option>\r\n                    <option>rushed</option>\r\n                    <option>frustrated</option>\r\n                    <option>confident</option>\r\n                    <option>fearful</option>\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Setup Quality */}\r\n                <div style={{ marginBottom: '16px' }}>\r\n                  <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: 'var(--text-primary)', marginBottom: '8px' }}>\r\n                    Setup Quality Rating\r\n                  </label>\r\n                  <select\r\n                    value={reviewData.setupQuality}\r\n                    onChange={(e) =>\r\n                      setReviewData(prev => ({ ...prev, setupQuality: parseInt(e.target.value) }))\r\n                    }\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '8px 12px',\r\n                      border: '1px solid var(--card-border)',\r\n                      borderRadius: '6px',\r\n                      backgroundColor: 'var(--panel-muted)',\r\n                      color: 'var(--text-primary)',\r\n                      fontSize: '13px',\r\n                      outline: 'none',\r\n                    }}\r\n                    onFocus={(e) => { e.currentTarget.style.borderColor = 'var(--purple-base)'; }}\r\n                    onBlur={(e) => { e.currentTarget.style.borderColor = 'var(--card-border)'; }}\r\n                  >\r\n                    <option value=\"1\">⭐ Poor</option>\r\n                    <option value=\"2\">⭐⭐ Below Average</option>\r\n                    <option value=\"3\">⭐⭐⭐ Average</option>\r\n                    <option value=\"4\">⭐⭐⭐⭐ Good</option>\r\n                    <option value=\"5\">⭐⭐⭐⭐⭐ Excellent</option>\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Mistakes */}\r\n                <div>\r\n                  <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: 'var(--text-primary)', marginBottom: '12px' }}>\r\n                    Mistakes Made\r\n                  </label>\r\n                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '12px' }}>\r\n                    {mistakeOptions.map(mistake => (\r\n                      <label key={mistake} style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer' }}>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={reviewData.mistakes.includes(mistake)}\r\n                          onChange={() => toggleMistake(mistake)}\r\n                          style={{\r\n                            width: '16px',\r\n                            height: '16px',\r\n                            borderRadius: '4px',\r\n                            border: '1px solid var(--card-border)',\r\n                            cursor: 'pointer',\r\n                            accentColor: 'var(--purple-base)',\r\n                          }}\r\n                        />\r\n                        <span style={{ fontSize: '13px', color: 'var(--text-primary)' }}>{mistake}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={saveReview}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '12px 16px',\r\n                  background: 'linear-gradient(135deg, var(--purple-base) 0%, var(--purple-dark) 100%)',\r\n                  color: 'white',\r\n                  fontWeight: '600',\r\n                  fontSize: '14px',\r\n                  border: 'none',\r\n                  borderRadius: '8px',\r\n                  cursor: 'pointer',\r\n                  transition: 'all 0.2s ease',\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.transform = 'translateY(-1px)';\r\n                  e.currentTarget.style.boxShadow = '0 8px 16px rgba(168, 85, 247, 0.3)';\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.transform = 'translateY(0)';\r\n                  e.currentTarget.style.boxShadow = 'none';\r\n                }}\r\n              >\r\n                Save Review\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div style={{ gridColumn: 'auto / span 2', backgroundColor: 'var(--card-bg)', border: '1px solid var(--card-border)', borderRadius: '12px', padding: '48px 20px', textAlign: 'center' }}>\r\n              <p style={{ color: 'var(--text-secondary)', margin: 0, fontSize: '14px' }}>Select a trade to review</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Media Uploads */}\r\n        {selectedTrade && (\r\n          <div style={{ marginTop: '32px', display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '24px' }}>\r\n            <div style={{ backgroundColor: 'var(--card-bg)', border: '1px solid var(--card-border)', borderRadius: '12px', padding: '20px' }}>\r\n              <VoiceRecorder />\r\n            </div>\r\n            <div style={{ backgroundColor: 'var(--card-bg)', border: '1px solid var(--card-border)', borderRadius: '12px', padding: '20px' }}>\r\n              <ScreenshotUploader />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </main>\r\n\r\n      <Toaster position=\"bottom-right\" />\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport toast from 'react-hot-toast';\r\nimport { FiMic, FiStopCircle, FiPlay, FiTrash2 } from 'react-icons/fi';\r\n\r\ninterface VoiceRecorderProps {\r\n  onRecordingSaved?: (audioUrl: string) => void;\r\n}\r\n\r\nexport default function VoiceRecorder({ onRecordingSaved }: VoiceRecorderProps) {\r\n  const mediaRecorder = useRef<MediaRecorder | null>(null);\r\n  const audioChunks = useRef<Blob[]>([]);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [recordingTime, setRecordingTime] = useState(0);\r\n  const [recordings, setRecordings] = useState<Array<{\r\n    id: string;\r\n    url: string;\r\n    duration: number;\r\n    timestamp: Date;\r\n    uploaded?: boolean;\r\n  }>>([]);\r\n  \r\n  const [playingId, setPlayingId] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    let interval: NodeJS.Timeout;\r\n    if (isRecording) {\r\n      interval = setInterval(() => {\r\n        setRecordingTime(prev => prev + 1);\r\n      }, 1000);\r\n    }\r\n    return () => clearInterval(interval);\r\n  }, [isRecording]);\r\n\r\n  const startRecording = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      mediaRecorder.current = new MediaRecorder(stream);\r\n      audioChunks.current = [];\r\n\r\n      mediaRecorder.current.ondataavailable = (event) => {\r\n        audioChunks.current.push(event.data);\r\n      };\r\n\r\n      mediaRecorder.current.onstop = () => {\r\n        (async () => {\r\n          const audioBlob = new Blob(audioChunks.current, { type: 'audio/webm' });\r\n          const url = URL.createObjectURL(audioBlob);\r\n          const recording = {\r\n            id: Date.now().toString(),\r\n            url,\r\n            duration: recordingTime,\r\n            timestamp: new Date(),\r\n            uploaded: false,\r\n          };\r\n\r\n          // Optimistically add local recording\r\n          setRecordings(prev => [recording, ...prev]);\r\n          onRecordingSaved?.(url);\r\n\r\n          // Try uploading to server\r\n          try {\r\n            const fd = new FormData();\r\n            fd.append('file', audioBlob, `voice-${Date.now()}.webm`);\r\n\r\n            const res = await fetch('/api/voice-notes', {\r\n              method: 'POST',\r\n              body: fd,\r\n              headers: {\r\n                'x-user-id': 'demo-user',\r\n              },\r\n            });\r\n\r\n            if (res.ok) {\r\n              const data = await res.json();\r\n              // If API returns stored URL, replace local URL\r\n              if (data?.url) {\r\n                setRecordings(prev => prev.map(r => r.id === recording.id ? { ...r, url: data.url, uploaded: true } : r));\r\n              } else {\r\n                setRecordings(prev => prev.map(r => r.id === recording.id ? { ...r, uploaded: true } : r));\r\n              }\r\n              toast.success('Voice note uploaded');\r\n            } else {\r\n              toast('Saved locally (upload failed)', { icon: '⚠️' });\r\n            }\r\n          } catch (err) {\r\n            console.error('Voice upload failed', err);\r\n            toast('Saved locally (upload failed)', { icon: '⚠️' });\r\n          }\r\n        })();\r\n      };\r\n\r\n      mediaRecorder.current.start();\r\n      setIsRecording(true);\r\n      setRecordingTime(0);\r\n    } catch (error) {\r\n      toast.error('Unable to access microphone');\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const stopRecording = () => {\r\n    if (mediaRecorder.current && isRecording) {\r\n      mediaRecorder.current.stop();\r\n      setIsRecording(false);\r\n      mediaRecorder.current.stream.getTracks().forEach(track => track.stop());\r\n    }\r\n  };\r\n\r\n  const deleteRecording = (id: string) => {\r\n    setRecordings(prev => prev.filter(r => r.id !== id));\r\n  };\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Recording Controls */}\r\n      <div className=\"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700\">\r\n        <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-4\">Voice Notes</h3>\r\n\r\n        {/* Recording Interface */}\r\n        <div className=\"flex items-center gap-4 mb-4 flex-wrap\">\r\n          {!isRecording ? (\r\n            <button\r\n              onClick={startRecording}\r\n              className=\"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors\"\r\n              aria-label=\"Start recording voice note\"\r\n            >\r\n              <FiMic className=\"w-5 h-5\" />\r\n              Start Recording\r\n            </button>\r\n          ) : (\r\n            <>\r\n              <button\r\n                onClick={stopRecording}\r\n                className=\"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors\"\r\n                aria-label=\"Stop recording\"\r\n                aria-live=\"polite\"\r\n              >\r\n                <FiStopCircle className=\"w-5 h-5\" />\r\n                Stop\r\n              </button>\r\n              <div className=\"text-lg font-bold text-red-600 dark:text-red-400\" aria-live=\"polite\">\r\n                Recording: {formatTime(recordingTime)}\r\n              </div>\r\n              <div className=\"flex-1 h-1 bg-red-300 dark:bg-red-900 rounded-full relative overflow-hidden min-w-[100px]\">\r\n                <div className=\"h-full bg-red-600 animate-pulse\" style={{width: '30%'}} />\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {/* Recorded Clips */}\r\n        {recordings.length > 0 && (\r\n          <div className=\"space-y-3\">\r\n            <h4 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300\">Recordings ({recordings.length})</h4>\r\n            {recordings.map(recording => (\r\n              <div\r\n                key={recording.id}\r\n                className=\"flex items-center justify-between bg-gray-50 dark:bg-slate-700 p-3 rounded-lg\"\r\n              >\r\n                <div className=\"flex items-center gap-3 flex-1\">\r\n                  <button\r\n                    onClick={() => setPlayingId(playingId === recording.id ? null : recording.id)}\r\n                    className=\"p-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors\"\r\n                    aria-label={playingId === recording.id ? 'Pause recording' : 'Play recording'}\r\n                  >\r\n                    <FiPlay className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                      {recording.timestamp.toLocaleTimeString()}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                      Duration: {formatTime(recording.duration)}\r\n                      {recording.uploaded && <span className=\"ml-2\">✓ Uploaded</span>}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={() => deleteRecording(recording.id)}\r\n                  className=\"p-2 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors\"\r\n                  aria-label={`Delete recording from ${recording.timestamp.toLocaleTimeString()}`}\r\n                >\r\n                  <FiTrash2 className=\"w-4 h-4\" />\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {recordings.length === 0 && !isRecording && (\r\n          <p className=\"text-sm text-gray-600 dark:text-gray-400 text-center py-6\">\r\n            No recordings yet. Start recording to add voice notes to your trades.\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Hidden Audio Player */}\r\n      {playingId && (\r\n        <audio\r\n          key={playingId}\r\n          src={recordings.find(r => r.id === playingId)?.url}\r\n          autoPlay\r\n          controls\r\n          className=\"w-full\"\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useRef } from 'react';\r\nimport toast from 'react-hot-toast';\r\nimport { FiUpload, FiX, FiDownload } from 'react-icons/fi';\r\n\r\ninterface ScreenshotUploaderProps {\r\n  onScreenshotAdded?: (dataUrl: string) => void;\r\n}\r\n\r\nexport default function ScreenshotUploader({ onScreenshotAdded }: ScreenshotUploaderProps) {\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [screenshots, setScreenshots] = useState<Array<{\r\n    id: string;\r\n    url: string;\r\n    caption: string;\r\n    timestamp: Date;\r\n  }>>([]);\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [editCaption, setEditCaption] = useState('');\r\n\r\n  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = e.currentTarget.files;\r\n    if (!files) return;\r\n\r\n    for (const file of Array.from(files)) {\r\n      try {\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n          const dataUrl = event.target?.result as string;\r\n          const screenshot = {\r\n            id: Date.now().toString() + Math.random(),\r\n            url: dataUrl,\r\n            caption: '',\r\n            timestamp: new Date(),\r\n          };\r\n          setScreenshots(prev => [screenshot, ...prev]);\r\n          onScreenshotAdded?.(dataUrl);\r\n          toast.success('Screenshot uploaded');\r\n        };\r\n        reader.readAsDataURL(file);\r\n      } catch (error) {\r\n        toast.error('Failed to upload screenshot');\r\n        console.error(error);\r\n      }\r\n    }\r\n\r\n    // Reset input\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const updateCaption = (id: string, newCaption: string) => {\r\n    setScreenshots(prev =>\r\n      prev.map(s => (s.id === id ? { ...s, caption: newCaption } : s))\r\n    );\r\n    setEditingId(null);\r\n  };\r\n\r\n  const deleteScreenshot = (id: string) => {\r\n    setScreenshots(prev => prev.filter(s => s.id !== id));\r\n  };\r\n\r\n  const downloadScreenshot = (url: string, timestamp: Date) => {\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `trade-setup-${timestamp.toISOString()}.png`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"bg-white dark:bg-slate-800 rounded-lg p-6 border border-gray-200 dark:border-slate-700\">\r\n        <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-4\">Trade Setup Screenshots</h3>\r\n\r\n        {/* Upload Area */}\r\n        <button\r\n          onClick={() => fileInputRef.current?.click()}\r\n          className=\"w-full border-2 border-dashed border-gray-300 dark:border-slate-600 rounded-lg p-6 text-center cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors\"\r\n          aria-label=\"Upload screenshot by clicking or dragging files\"\r\n        >\r\n          <FiUpload className=\"w-8 h-8 mx-auto mb-2 text-gray-600 dark:text-gray-400\" />\r\n          <p className=\"text-sm font-medium text-gray-900 dark:text-white\">Click to upload or drag & drop</p>\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400\">PNG, JPG, GIF up to 10MB</p>\r\n          <input\r\n            ref={fileInputRef}\r\n            type=\"file\"\r\n            multiple\r\n            accept=\"image/*\"\r\n            onChange={handleFileSelect}\r\n            className=\"hidden\"\r\n            aria-label=\"File input for screenshots\"\r\n          />\r\n        </button>\r\n\r\n        {/* Screenshots Grid */}\r\n        {screenshots.length > 0 && (\r\n          <div className=\"mt-6\">\r\n            <h4 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4\">Uploads ({screenshots.length})</h4>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n              {screenshots.map(screenshot => (\r\n                <div\r\n                  key={screenshot.id}\r\n                  className=\"relative group bg-gray-100 dark:bg-slate-700 rounded-lg overflow-hidden\"\r\n                >\r\n                  {/* Image */}\r\n                  <img\r\n                    src={screenshot.url}\r\n                    alt=\"Trade setup\"\r\n                    className=\"w-full h-40 object-cover\"\r\n                  />\r\n\r\n                  {/* Overlay */}\r\n                  <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-between p-2\">\r\n                    <button\r\n                      onClick={() => downloadScreenshot(screenshot.url, screenshot.timestamp)}\r\n                      className=\"p-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors\"\r\n                      title=\"Download\"\r\n                    >\r\n                      <FiDownload className=\"w-4 h-4\" />\r\n                    </button>\r\n                    <button\r\n                      onClick={() => deleteScreenshot(screenshot.id)}\r\n                      className=\"p-2 rounded-lg bg-red-600 hover:bg-red-700 text-white transition-colors\"\r\n                      title=\"Delete\"\r\n                    >\r\n                      <FiX className=\"w-4 h-4\" />\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Caption */}\r\n                  <div className=\"p-3 bg-white dark:bg-slate-800 border-t border-gray-200 dark:border-slate-600\">\r\n                    {editingId === screenshot.id ? (\r\n                      <input\r\n                        autoFocus\r\n                        type=\"text\"\r\n                        value={editCaption}\r\n                        onChange={(e) => setEditCaption(e.target.value)}\r\n                        onBlur={() => updateCaption(screenshot.id, editCaption)}\r\n                        onKeyPress={(e) => {\r\n                          if (e.key === 'Enter') {\r\n                            updateCaption(screenshot.id, editCaption);\r\n                          }\r\n                        }}\r\n                        placeholder=\"Add caption...\"\r\n                        className=\"w-full px-2 py-1 border border-gray-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-gray-900 dark:text-white text-xs focus:ring-2 focus:ring-blue-500 outline-none\"\r\n                      />\r\n                    ) : (\r\n                      <p\r\n                        onClick={() => {\r\n                          setEditingId(screenshot.id);\r\n                          setEditCaption(screenshot.caption);\r\n                        }}\r\n                        className=\"text-xs text-gray-600 dark:text-gray-400 cursor-pointer hover:text-gray-900 dark:hover:text-white\"\r\n                      >\r\n                        {screenshot.caption || 'Click to add caption...'}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}