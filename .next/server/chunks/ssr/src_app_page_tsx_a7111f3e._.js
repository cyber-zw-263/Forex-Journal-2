module.exports=[40777,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271);function e({title:a,value:c,subtitle:e,icon:f,color:g="purple",trend:h}){let i={purple:{bg:"var(--purple-darker)",accent:"var(--purple-light)"},green:{bg:"rgba(16, 185, 129, 0.1)",accent:"var(--win-color)"},red:{bg:"rgba(239, 68, 68, 0.1)",accent:"var(--loss-color)"},blue:{bg:"rgba(59, 130, 246, 0.1)",accent:"var(--blue-accent)"}}[g];return(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"24px",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:a=>{a.currentTarget.style.borderColor=i.accent,a.currentTarget.style.boxShadow=`0 8px 32px ${i.accent}33`,a.currentTarget.style.transform="translateY(-4px)"},onMouseLeave:a=>{a.currentTarget.style.borderColor="var(--card-border)",a.currentTarget.style.boxShadow="none",a.currentTarget.style.transform="translateY(0)"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("p",{style:{fontSize:"13px",color:"var(--neutral-color)",margin:"0 0 8px 0",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"600"},children:a}),(0,b.jsx)("h3",{style:{fontSize:"32px",fontWeight:"bold",margin:"0 0 4px 0",background:"purple"===g?"linear-gradient(135deg, var(--purple-light) 0%, var(--cyan-accent) 100%)":"inherit",WebkitBackgroundClip:"purple"===g?"text":"unset",WebkitTextFillColor:"purple"===g?"transparent":"inherit",backgroundClip:"purple"===g?"text":"unset",color:"purple"===g?"inherit":i.accent},children:c}),e&&(0,b.jsx)("p",{style:{fontSize:"12px",color:"var(--neutral-color)",margin:"0"},children:e})]}),f&&(0,b.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"8px",background:i.bg,display:"flex",alignItems:"center",justifyContent:"center",color:i.accent},children:f})]}),h&&(0,b.jsxs)("div",{style:{marginTop:"12px",display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"up"===h.direction?"var(--win-color)":"var(--loss-color)"},children:[(0,b.jsx)("span",{children:"up"===h.direction?"↑":"↓"}),(0,b.jsxs)("span",{children:[Math.abs(h.value),"% from last month"]})]})]})}var f=a.i(67468),g=a.i(27348),h=a.i(6704);function i({trades:a,isLoading:d,onTradeDeleted:e,onEdit:f}){let[i,j]=(0,c.useState)(null),k=async a=>{try{(await fetch(`/api/trades/${a}`,{method:"DELETE",headers:{"x-user-id":"demo-user"}})).ok?(h.default.success("Trade deleted"),j(null),e()):h.default.error("Failed to delete trade")}catch(a){h.default.error("Failed to delete trade"),j(null)}};return d?(0,b.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-8 border border-gray-200 dark:border-slate-700",children:(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"animate-spin",children:"⏳"})})}):a.length?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Recent Trades"}),(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>(0,b.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-gray-200 dark:border-slate-700 hover:shadow-md dark:hover:shadow-lg transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:a.pair}),(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-semibold ${"LONG"===a.direction?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:a.direction}),(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-semibold ${"WIN"===a.outcome?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"LOSS"===a.outcome?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:a.outcome||"Open"})]}),(0,b.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Entry Price"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:a.entryPrice.toFixed(5)})]}),a.exitPrice&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Exit Price"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:a.exitPrice.toFixed(5)})]}),void 0!==a.profitLoss&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"P&L"}),(0,b.jsxs)("p",{className:`font-semibold ${a.profitLoss>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[a.profitLoss>=0?"+":"",a.profitLoss.toFixed(2)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Date"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:new Date(a.entryTime).toLocaleDateString()})]})]}),a.strategy&&(0,b.jsxs)("p",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:["Strategy: ",(0,b.jsx)("span",{className:"font-semibold",children:a.strategy})]}),a.notes&&(0,b.jsx)("p",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400 line-clamp-2",children:a.notes}),a.setupQuality&&(0,b.jsxs)("p",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:["Quality: ",["⭐","⭐⭐","⭐⭐⭐","⭐⭐⭐⭐","⭐⭐⭐⭐⭐"][a.setupQuality-1]]})]}),(0,b.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,b.jsx)("button",{onClick:()=>"function"==typeof f?f(a):null,className:"p-2 rounded-lg text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-slate-700/30 transition-colors",title:"Edit trade","aria-label":`Edit ${a.pair} trade`,children:(0,b.jsx)(g.FiEdit,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>k(a.id),className:"p-2 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",title:"Delete trade","aria-label":`Delete ${a.pair} trade`,children:(0,b.jsx)(g.FiTrash2,{className:"w-5 h-5"})})]})]})},a.id))}),i&&(0,b.jsxs)("div",{role:"dialog","aria-modal":"true","aria-label":"Confirm delete",className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black opacity-50",onClick:()=>j(null)}),(0,b.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 z-10 border border-gray-200 dark:border-slate-700",style:{width:"100%",maxWidth:420},children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Delete trade?"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"This action cannot be undone. Are you sure you want to delete this trade?"}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,b.jsx)("button",{onClick:()=>j(null),className:"px-4 py-2 rounded bg-transparent border border-gray-300",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>k(i),className:"px-4 py-2 rounded bg-red-600 text-white",children:"Delete"})]})]})]})]}):(0,b.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-8 border border-gray-200 dark:border-slate-700 text-center",children:(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No trades recorded yet. Add your first trade to get started!"})})}var j=a.i(554),k=a.i(31760),l=["axis"],m=(0,c.forwardRef)((a,b)=>c.createElement(k.CartesianChart,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:l,tooltipPayloadSearcher:j.arrayTooltipSearcher,categoricalChartProps:a,ref:b})),n=a.i(85811),o=a.i(18155),p=a.i(23665),q=a.i(58042),r=a.i(94222),s=a.i(54419),t=a.i(59854),u=a.i(48662),v=a.i(64321),w=a.i(27165),x=a.i(67149);function y(){let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!1),[y,z]=(0,c.useState)({totalPnL:0,winRate:0,totalTrades:0,closedTrades:0,avgWin:0,avgLoss:0,wins:0,losses:0,bestDay:0,worstDay:0}),A=async()=>{try{l(!0);let a=await fetch("/api/trades",{headers:{"x-user-id":"demo-user"}});if(!a.ok){let b=null;try{b=await a.json()}catch(c){b=await a.text()}console.error("Failed to fetch trades:",a.status,b),h.default.error("Failed to fetch trades"),j([]),z({totalPnL:0,winRate:0,totalTrades:0,closedTrades:0,avgWin:0,avgLoss:0,wins:0,losses:0,bestDay:0,worstDay:0});return}let b=await a.json();if(!Array.isArray(b)){console.warn("Unexpected trades payload, expected array but got:",b),h.default.error("Unexpected trades format"),j([]),z({totalPnL:0,winRate:0,totalTrades:0,closedTrades:0,avgWin:0,avgLoss:0,wins:0,losses:0,bestDay:0,worstDay:0});return}j(b);let c=b.filter(a=>a.outcome&&"OPEN"!==a.outcome),d=c.filter(a=>"WIN"===a.outcome).length,e=c.filter(a=>"LOSS"===a.outcome).length,f=b.reduce((a,b)=>a+(b.profitLoss||0),0),g=d>0?b.filter(a=>"WIN"===a.outcome&&a.profitLoss).reduce((a,b)=>a+b.profitLoss,0)/d:0,i=e>0?Math.abs(b.filter(a=>"LOSS"===a.outcome&&a.profitLoss).reduce((a,b)=>a+b.profitLoss,0)/e):0;z({totalPnL:parseFloat(f.toFixed(2)),winRate:c.length>0?parseFloat((d/c.length*100).toFixed(2)):0,totalTrades:b.length,closedTrades:c.length,avgWin:parseFloat(g.toFixed(2)),avgLoss:parseFloat(i.toFixed(2)),wins:d,losses:e,bestDay:f,worstDay:-f})}catch(a){console.error("Error fetching trades:",a),h.default.error("Failed to fetch trades")}finally{l(!1)}};(0,c.useEffect)(()=>{A()},[]);let[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null),F=a.sort((a,b)=>new Date(a.entryTime).getTime()-new Date(b.entryTime).getTime()).reduce((a,b,c)=>{let d=a.length>0?a[a.length-1].equity+(b.profitLoss||0):b.profitLoss||0;return[...a,{name:`Trade ${c+1}`,equity:parseFloat(d.toFixed(2)),date:new Date(b.entryTime).toLocaleDateString()}]},[]),G=[{name:"Wins",value:y.wins,color:"var(--win-color)"},{name:"Losses",value:y.losses,color:"var(--loss-color)"}],H=a.reduce((a,b)=>{let c=a.find(a=>a.pair===b.pair);return c?c.pnl+=b.profitLoss||0:a.push({pair:b.pair,pnl:b.profitLoss||0}),a},[]).sort((a,b)=>b.pnl-a.pnl).slice(0,5);return(0,b.jsxs)("div",{style:{width:"100%"},children:[(0,b.jsx)(h.Toaster,{position:"bottom-right"}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},style:{marginBottom:"32px"},children:[(0,b.jsx)("h2",{style:{fontSize:"28px",fontWeight:"bold",margin:"0 0 8px 0",color:"var(--foreground)"},children:"Trading Dashboard"}),(0,b.jsx)("p",{style:{fontSize:"14px",color:"var(--neutral-color)",margin:0},children:"Your complete trading journal and performance analytics"})]}),(0,b.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,b.jsxs)("button",{onClick:A,disabled:k,style:{background:"linear-gradient(135deg, var(--purple-base) 0%, var(--purple-dark) 100%)",color:"white",padding:"10px 20px",borderRadius:"8px",border:"none",cursor:k?"not-allowed":"pointer",fontWeight:"600",fontSize:"14px",transition:"all 0.3s ease",opacity:k?.6:1,display:"flex",alignItems:"center",gap:"8px"},children:[(0,b.jsx)(g.FiRefreshCw,{size:16,style:{animation:k?"spin 1s linear infinite":"none"}}),k?"Loading...":"Refresh Data"]}),(0,b.jsx)("button",{onClick:()=>{E(null),C(!0)},style:{marginLeft:"12px",background:"transparent",color:"var(--foreground)",padding:"10px 16px",borderRadius:"8px",border:"1px solid var(--card-border)",cursor:"pointer",fontWeight:"600",fontSize:"14px"},children:"+ Add Trade"})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"32px"},children:[(0,b.jsx)(e,{title:"Total P&L",value:`$${y.totalPnL}`,color:y.totalPnL>=0?"green":"red",subtitle:`${y.closedTrades} closed trades`,icon:(0,b.jsx)(g.FiDollarSign,{size:24}),trend:{value:12.5,direction:y.totalPnL>=0?"up":"down"}}),(0,b.jsx)(e,{title:"Win Rate",value:`${y.winRate}%`,color:"blue",subtitle:`${y.wins}W / ${y.losses}L`,icon:(0,b.jsx)(g.FiTrendingUp,{size:24})}),(0,b.jsx)(e,{title:"Avg Win / Loss",value:`$${y.avgWin} / $${y.avgLoss}`,color:"purple",subtitle:"Risk-Reward Ratio",icon:(0,b.jsx)(g.FiTarget,{size:24})}),(0,b.jsx)(e,{title:"Total Trades",value:y.totalTrades,color:"blue",subtitle:`${y.closedTrades} closed`})]}),(0,b.jsx)("div",{style:{marginBottom:"32px"},children:(0,b.jsx)(i,{trades:a,isLoading:k,onTradeDeleted:A,onEdit:a=>{E(a),C(!0)}})}),B&&(0,b.jsx)(f.default,{onClose:()=>C(!1),onTradeAdded:()=>{C(!1),A()},initialData:D||void 0}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 360px",gap:"24px",marginBottom:"32px"},children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"var(--radius-lg)",padding:"20px",minHeight:"360px"},children:[(0,b.jsx)("h3",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"16px",color:"var(--foreground)"},children:"Equity Curve"}),F.length>0?(0,b.jsx)(u.ResponsiveContainer,{width:"100%",height:320,children:(0,b.jsxs)(m,{data:F,children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"colorEquity",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,b.jsx)("stop",{offset:"5%",stopColor:"var(--purple-base)",stopOpacity:.9}),(0,b.jsx)("stop",{offset:"95%",stopColor:"var(--purple-base)",stopOpacity:.08})]})}),(0,b.jsx)(s.CartesianGrid,{strokeDasharray:"3 3",stroke:"var(--card-border)"}),(0,b.jsx)(q.XAxis,{dataKey:"name",stroke:"var(--neutral-color)"}),(0,b.jsx)(r.YAxis,{stroke:"var(--neutral-color)"}),(0,b.jsx)(t.Tooltip,{contentStyle:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"8px"}}),(0,b.jsx)(n.Area,{type:"monotone",dataKey:"equity",stroke:"var(--purple-light)",fillOpacity:1,fill:"url(#colorEquity)"})]})}):(0,b.jsx)("div",{style:{height:"300px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--neutral-color)"},children:"No trades to display"})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"18px"},children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"var(--radius-md)",padding:"16px",minHeight:"180px"},children:[(0,b.jsx)("h3",{style:{fontSize:"14px",fontWeight:"700",marginBottom:"12px",color:"var(--foreground)"},children:"Win Distribution"}),G.some(a=>a.value>0)?(0,b.jsx)(u.ResponsiveContainer,{width:"100%",height:140,children:(0,b.jsx)(v.PieChart,{children:(0,b.jsx)(w.Pie,{data:G,cx:"50%",cy:"50%",labelLine:!1,label:a=>`${a.name}: ${a.value}`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:G.map((a,c)=>(0,b.jsx)(x.Cell,{fill:a.color},`cell-${c}`))})})}):(0,b.jsx)("div",{style:{height:"140px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--neutral-color)"},children:"No closed trades yet"})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"var(--radius-md)",padding:"16px",minHeight:"200px"},children:[(0,b.jsx)("h3",{style:{fontSize:"14px",fontWeight:"700",marginBottom:"12px",color:"var(--foreground)"},children:"Top Pairs"}),H.length>0?(0,b.jsx)(u.ResponsiveContainer,{width:"100%",height:160,children:(0,b.jsxs)(o.BarChart,{data:H,children:[(0,b.jsx)(s.CartesianGrid,{strokeDasharray:"3 3",stroke:"var(--card-border)"}),(0,b.jsx)(q.XAxis,{dataKey:"pair",stroke:"var(--neutral-color)"}),(0,b.jsx)(r.YAxis,{stroke:"var(--neutral-color)"}),(0,b.jsx)(p.Bar,{dataKey:"pnl",fill:"var(--purple-light)",radius:[6,6,0,0]})]})}):(0,b.jsx)("div",{style:{height:"160px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--neutral-color)"},children:"No trade data yet"})]})]})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[(0,b.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"16px",textAlign:"center"},children:[(0,b.jsx)("p",{style:{color:"var(--neutral-color)",margin:"0 0 8px 0",fontSize:"12px"},children:"Consecutive Wins"}),(0,b.jsx)("p",{style:{fontSize:"24px",fontWeight:"bold",margin:0,color:"var(--win-color)"},children:"0"})]}),(0,b.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"16px",textAlign:"center"},children:[(0,b.jsx)("p",{style:{color:"var(--neutral-color)",margin:"0 0 8px 0",fontSize:"12px"},children:"Best Day"}),(0,b.jsxs)("p",{style:{fontSize:"24px",fontWeight:"bold",margin:0,color:"var(--win-color)"},children:["$",y.bestDay]})]}),(0,b.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"16px",textAlign:"center"},children:[(0,b.jsx)("p",{style:{color:"var(--neutral-color)",margin:"0 0 8px 0",fontSize:"12px"},children:"Worst Day"}),(0,b.jsxs)("p",{style:{fontSize:"24px",fontWeight:"bold",margin:0,color:"var(--loss-color)"},children:["$",y.worstDay]})]})]})]})}a.s(["default",()=>y],40777)}];

//# sourceMappingURL=src_app_page_tsx_a7111f3e._.js.map