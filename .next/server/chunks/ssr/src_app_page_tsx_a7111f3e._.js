module.exports=[40777,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(42029),e=a.i(6704),f=a.i(27348);function g({onTradeAdded:a}){let[d,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)({pair:"EUR/USD",direction:"LONG",entryPrice:"",exitPrice:"",quantity:"",entryTime:new Date().toISOString().slice(0,16),exitTime:"",outcome:"WIN",strategy:"",emotionalState:"calm",setupQuality:"3",notes:""}),j=a=>{let{name:b,value:c}=a.target;i(a=>({...a,[b]:c}))},k=async b=>{b.preventDefault();try{let b=h.exitPrice&&h.entryPrice&&h.quantity?(parseFloat(h.exitPrice)-parseFloat(h.entryPrice))*parseFloat(h.quantity):void 0;(await fetch("/api/trades",{method:"POST",headers:{"Content-Type":"application/json","x-user-id":"demo-user"},body:JSON.stringify({...h,profitLoss:b,entryPrice:parseFloat(h.entryPrice),exitPrice:h.exitPrice?parseFloat(h.exitPrice):null,quantity:parseFloat(h.quantity),setupQuality:parseInt(h.setupQuality)})})).ok&&(e.default.success("Trade added successfully!"),i({pair:"EUR/USD",direction:"LONG",entryPrice:"",exitPrice:"",quantity:"",entryTime:new Date().toISOString().slice(0,16),exitTime:"",outcome:"WIN",strategy:"",emotionalState:"calm",setupQuality:"3",notes:""}),g(!1),a())}catch(a){e.default.error("Failed to add trade"),console.error(a)}};return(0,b.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md border border-gray-200 dark:border-slate-700 p-6 sticky top-24",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Quick Add Trade"}),d?(0,b.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Pair"}),(0,b.jsxs)("select",{name:"pair",value:h.pair,onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[(0,b.jsx)("option",{children:"EUR/USD"}),(0,b.jsx)("option",{children:"GBP/USD"}),(0,b.jsx)("option",{children:"USD/JPY"}),(0,b.jsx)("option",{children:"AUD/USD"}),(0,b.jsx)("option",{children:"USD/CAD"}),(0,b.jsx)("option",{children:"Other"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Direction"}),(0,b.jsxs)("select",{name:"direction",value:h.direction,onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[(0,b.jsx)("option",{children:"LONG"}),(0,b.jsx)("option",{children:"SHORT"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Entry Price"}),(0,b.jsx)("input",{type:"number",name:"entryPrice",step:"0.00001",placeholder:"1.0850",value:h.entryPrice,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Exit Price"}),(0,b.jsx)("input",{type:"number",name:"exitPrice",step:"0.00001",placeholder:"1.0865",value:h.exitPrice,onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Quantity (Lots)"}),(0,b.jsx)("input",{type:"number",name:"quantity",step:"0.01",placeholder:"1.0",value:h.quantity,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Strategy"}),(0,b.jsx)("input",{type:"text",name:"strategy",placeholder:"Breakout, Scalp",value:h.strategy,onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"State"}),(0,b.jsxs)("select",{name:"emotionalState",value:h.emotionalState,onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[(0,b.jsx)("option",{children:"calm"}),(0,b.jsx)("option",{children:"rushed"}),(0,b.jsx)("option",{children:"frustrated"}),(0,b.jsx)("option",{children:"confident"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Outcome"}),(0,b.jsxs)("select",{name:"outcome",value:h.outcome,onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[(0,b.jsx)("option",{children:"WIN"}),(0,b.jsx)("option",{children:"LOSS"}),(0,b.jsx)("option",{children:"BREAKEVEN"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Setup Quality"}),(0,b.jsxs)("select",{name:"setupQuality",value:h.setupQuality,onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[(0,b.jsx)("option",{value:"1",children:"⭐ 1"}),(0,b.jsx)("option",{value:"2",children:"⭐⭐ 2"}),(0,b.jsx)("option",{value:"3",children:"⭐⭐⭐ 3"}),(0,b.jsx)("option",{value:"4",children:"⭐⭐⭐⭐ 4"}),(0,b.jsx)("option",{value:"5",children:"⭐⭐⭐⭐⭐ 5"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),(0,b.jsx)("textarea",{name:"notes",placeholder:"Trade notes...",value:h.notes,onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none h-20"})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded-lg transition-colors",children:"Save Trade"}),(0,b.jsx)("button",{type:"button",onClick:()=>g(!1),className:"flex-1 bg-gray-200 dark:bg-slate-700 text-gray-900 dark:text-white font-semibold py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors",children:"Cancel"})]})]}):(0,b.jsxs)("button",{onClick:()=>g(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[(0,b.jsx)(f.FiPlus,{className:"w-5 h-5"}),"Add New Trade"]})]})}function h({value:a=0}){let c=2*Math.PI*36,d=a/100*c;return(0,b.jsxs)("svg",{width:"84",height:"84",viewBox:"0 0 84 84",children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"g1",x1:"0%",x2:"100%",children:[(0,b.jsx)("stop",{offset:"0%",stopColor:"#06b6d4"}),(0,b.jsx)("stop",{offset:"100%",stopColor:"#7c3aed"})]})}),(0,b.jsxs)("g",{transform:"translate(42,42)",children:[(0,b.jsx)("circle",{r:36,stroke:"#1f2937",strokeWidth:"12",fill:"none",opacity:"0.2"}),(0,b.jsx)("circle",{r:36,stroke:"url(#g1)",strokeWidth:"12",strokeLinecap:"round",fill:"none",strokeDasharray:`${d} ${c-d}`,transform:"rotate(-90)"}),(0,b.jsxs)("text",{x:"0",y:"6",fill:"#e6e6e6",fontSize:"16",fontWeight:"700",textAnchor:"middle",children:[a,"%"]})]})]})}function i({trades:a}){let d=(0,c.useMemo)(()=>{if(!a.length)return{totalPnL:0,winRate:0,totalTrades:0,consecutiveWins:0,avgWin:0,avgLoss:0,profitFactor:0};let b=a.reduce((a,b)=>a+(b.profitLoss||0),0),c=a.filter(a=>"WIN"===a.outcome).length;a.filter(a=>"LOSS"===a.outcome).length;let d=a.length>0?Math.round(c/a.length*100):0,e=a.filter(a=>a.profitLoss&&a.profitLoss>0),f=a.filter(a=>a.profitLoss&&a.profitLoss<0),g=e.length>0?e.reduce((a,b)=>a+(b.profitLoss||0),0)/e.length:0,h=f.length>0?f.reduce((a,b)=>a+Math.abs(b.profitLoss||0),0)/f.length:0,i=e.reduce((a,b)=>a+(b.profitLoss||0),0),j=f.reduce((a,b)=>a+Math.abs(b.profitLoss||0),0),k=0===j?i>0?1/0:0:Math.round(i/j*100)/100,l=0;for(let b of a)if("WIN"===b.outcome)l++;else break;return{totalPnL:b,winRate:d,totalTrades:a.length,consecutiveWins:l,avgWin:Math.round(100*g)/100,avgLoss:Math.round(100*h)/100,profitFactor:k}},[a]),e=({icon:a,label:c,value:d,unit:e="",isPositive:f=!0,children:g})=>(0,b.jsxs)("div",{className:"card-glass p-4 rounded-lg hover:shadow-lg transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase tracking-wide",children:c}),(0,b.jsxs)("p",{className:`text-2xl font-bold mt-2 ${"Total P&L"===c?"grad-text":"text-gray-200"}`,children:[d," ",e]})]}),(0,b.jsx)("div",{className:`p-3 rounded-lg ${f?"bg-green-900/20 text-green-300":"bg-red-900/20 text-red-300"}`,children:(0,b.jsx)(a,{className:"w-5 h-5"})})]}),g]});return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(e,{icon:f.FiTrendingUp,label:"Total P&L",value:d.totalPnL.toFixed(2),unit:"USD",isPositive:d.totalPnL>=0}),(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)("div",{className:"card-glass p-4 rounded-lg flex items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-400 uppercase",children:"Win Rate"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(h,{value:d.winRate})})]}),(0,b.jsxs)("div",{className:"ml-auto",children:[(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"Total Trades"}),(0,b.jsx)("p",{className:"text-lg font-bold text-gray-200 mt-1",children:d.totalTrades})]})]})}),(0,b.jsx)(e,{icon:f.FiActivity,label:"Avg Win / Loss",value:`+${d.avgWin} / ${d.avgLoss}`,isPositive:d.avgWin>d.avgLoss}),(0,b.jsx)(e,{icon:f.FiTrendingDown,label:"Profit Factor",value:d.profitFactor===1/0?"∞":d.profitFactor,isPositive:d.profitFactor>=1})]})})}function j({trades:a,isLoading:c,onTradeDeleted:d}){let g=async a=>{if(confirm("Are you sure you want to delete this trade?"))try{(await fetch(`/api/trades/${a}`,{method:"DELETE",headers:{"x-user-id":"demo-user"}})).ok&&(e.default.success("Trade deleted"),d())}catch(a){e.default.error("Failed to delete trade")}};return c?(0,b.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-8 border border-gray-200 dark:border-slate-700",children:(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"animate-spin",children:"⏳"})})}):a.length?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Recent Trades"}),(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>(0,b.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-gray-200 dark:border-slate-700 hover:shadow-md dark:hover:shadow-lg transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:a.pair}),(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-semibold ${"LONG"===a.direction?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:a.direction}),(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-semibold ${"WIN"===a.outcome?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"LOSS"===a.outcome?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:a.outcome||"Open"})]}),(0,b.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Entry Price"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:a.entryPrice.toFixed(5)})]}),a.exitPrice&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Exit Price"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:a.exitPrice.toFixed(5)})]}),void 0!==a.profitLoss&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"P&L"}),(0,b.jsxs)("p",{className:`font-semibold ${a.profitLoss>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[a.profitLoss>=0?"+":"",a.profitLoss.toFixed(2)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Date"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:new Date(a.entryTime).toLocaleDateString()})]})]}),a.strategy&&(0,b.jsxs)("p",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:["Strategy: ",(0,b.jsx)("span",{className:"font-semibold",children:a.strategy})]}),a.notes&&(0,b.jsx)("p",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400 line-clamp-2",children:a.notes}),a.setupQuality&&(0,b.jsxs)("p",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:["Quality: ",["⭐","⭐⭐","⭐⭐⭐","⭐⭐⭐⭐","⭐⭐⭐⭐⭐"][a.setupQuality-1]]})]}),(0,b.jsx)("div",{className:"flex gap-2 ml-4",children:(0,b.jsx)("button",{onClick:()=>g(a.id),className:"p-2 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",title:"Delete trade",children:(0,b.jsx)(f.FiTrash2,{className:"w-5 h-5"})})})]})},a.id))})]}):(0,b.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-8 border border-gray-200 dark:border-slate-700 text-center",children:(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No trades recorded yet. Add your first trade to get started!"})})}function k({trades:a,format:c}){return(0,b.jsxs)("button",{onClick:()=>{"csv"===c?(()=>{if(0===a.length)return e.default.error("No trades to export");let b=new Blob([[["Pair","Direction","Entry Price","Exit Price","P&L","Outcome","Entry Time","Strategy","Emotional State","Setup Quality","Notes"],...a.map(a=>[a.pair,a.direction,a.entryPrice,a.exitPrice||"",a.profitLoss||"",a.outcome||"",new Date(a.entryTime).toLocaleString(),a.strategy||"",a.emotionalState||"",a.setupQuality||"",a.notes||""])].map(a=>a.map(a=>`"${a}"`).join(",")).join("\n")],{type:"text/csv"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`trades-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c),e.default.success("Trades exported to CSV")})():(()=>{if(0===a.length)return e.default.error("No trades to export");let b=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`trades-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c),e.default.success("Trades exported to JSON")})()},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:[(0,b.jsx)(f.FiDownload,{className:"w-4 h-4"}),"Export ",c.toUpperCase()]})}function l(){let{theme:a,toggleTheme:f}=(0,d.useTheme)(),[h,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!1),o=async()=>{try{n(!0);let a=await fetch("/api/trades",{headers:{"x-user-id":"demo-user"}}),b=await a.json();l(b)}catch(a){console.error("Error fetching trades:",a)}finally{n(!1)}};return(0,c.useEffect)(()=>{o()},[]),(0,b.jsxs)("div",{className:"min-h-screen bg-slate-950 text-gray-200",children:[(0,b.jsxs)("main",{id:"main-content",className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,b.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,b.jsx)(k,{trades:h,format:"csv"}),(0,b.jsx)(k,{trades:h,format:"json"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:(0,b.jsx)(i,{trades:h})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsx)(g,{onTradeAdded:o})}),(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsx)(j,{trades:h,isLoading:m,onTradeDeleted:o})})]})]}),(0,b.jsx)(e.Toaster,{position:"bottom-right"})]})}function m(){let[a,d]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{d(!0)},[]),a)?(0,b.jsx)(l,{}):(0,b.jsx)("div",{className:"min-h-screen bg-white dark:bg-slate-950"})}a.s(["default",()=>m],40777)}];

//# sourceMappingURL=src_app_page_tsx_a7111f3e._.js.map