module.exports=[35082,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(42029),e=a.i(6704),f=a.i(27348);function g(){let{theme:a,toggleTheme:g}=(0,d.useTheme)(),[h,i]=(0,c.useState)(()=>!1),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(null);return((0,c.useEffect)(()=>{h&&(async()=>{try{o(!0),q(null);let a=await fetch("/api/trades",{headers:{"x-user-id":"demo-user"}});if(!a.ok){let b=null;try{b=await a.json()}catch(c){b=await a.text()}console.error("Failed to fetch trades:",a.status,b),q("Failed to load trades data"),k([]);return}let b=await a.json();if(!Array.isArray(b)){console.warn("Unexpected trades payload in insights page",b),q("Invalid trades data format"),k([]);return}k(b)}catch(a){console.error("Error fetching trades:",a),q("An error occurred while loading trades")}finally{o(!1)}})()},[h]),(0,c.useEffect)(()=>{if(0===j.length)return;let a=[],b={};j.forEach(a=>{b[a.pair]||(b[a.pair]={wins:0,losses:0,pnl:0}),"WIN"===a.outcome&&b[a.pair].wins++,"LOSS"===a.outcome&&b[a.pair].losses++,b[a.pair].pnl+=a.profitLoss||0});let c=Object.entries(b).sort((a,b)=>b[1].wins-a[1].wins)[0];c&&a.push({type:"strength",title:`${c[0]} is your best pair`,description:`You have a ${Math.round(c[1].wins/(c[1].wins+c[1].losses)*100)}% win rate on ${c[0]}. Consider trading it more often.`,icon:f.FiTrendingUp,color:"text-green-600 dark:text-green-400"});let d=j.filter(a=>a.emotionalState);if(d.length>0){let b={};d.forEach(a=>{b[a.emotionalState||""]||(b[a.emotionalState||""]={wins:0,losses:0}),"WIN"===a.outcome?b[a.emotionalState||""].wins++:b[a.emotionalState||""].losses++});let c=Object.entries(b).sort((a,b)=>b[1].wins-a[1].wins)[0];c&&a.push({type:"pattern",title:`You trade best when ${c[0]}`,description:`${c[1].wins} wins when ${c[0]} vs ${c[1].losses} losses. Remember this state for future trades.`,icon:f.FiZap,color:"text-blue-600 dark:text-blue-400"})}let e=j.filter(a=>"LONG"===a.direction),g=j.filter(a=>"SHORT"===a.direction),h=e.length>0?e.filter(a=>"WIN"===a.outcome).length/e.length*100:0,i=g.length>0?g.filter(a=>"WIN"===a.outcome).length/g.length*100:0;h>i&&h>40&&a.push({type:"improvement",title:"You are better at LONG trades",description:`Long win rate: ${Math.round(h)}% vs Short: ${Math.round(i)}%. Focus more on long setups.`,icon:f.FiTarget,color:"text-green-600 dark:text-green-400"});let k=j.filter(a=>a.mistakes).flatMap(a=>{try{return a.mistakes?JSON.parse(a.mistakes):[]}catch{return[]}});if(k.length>0){let b={};k.forEach(a=>{b[a]=(b[a]||0)+1});let c=Object.entries(b).sort((a,b)=>b[1]-a[1])[0];c&&c[1]>1&&a.push({type:"warning",title:`Repeated mistake: ${c[0]}`,description:`You've made this mistake ${c[1]} times. Create a checklist to prevent this.`,icon:f.FiAlertCircle,color:"text-orange-600 dark:text-orange-400"})}let l=j.filter(a=>{let b=new Date(a.entryTime).getHours();return b>=8&&b<12});if(l.length>5){let b=l.filter(a=>"WIN"===a.outcome).length/l.length*100;b>60&&a.push({type:"pattern",title:"You trade best in the morning",description:`Morning (8am-12pm) win rate: ${Math.round(b)}%. Schedule more trades during this time.`,icon:f.FiTrendingUp,color:"text-yellow-600 dark:text-yellow-400"})}m(a)},[j]),h)?(0,b.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"var(--background)"},children:[(0,b.jsxs)("main",{style:{maxWidth:"1000px",margin:"0 auto",padding:"32px 16px"},children:[(0,b.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,b.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",color:"var(--text-primary)",marginBottom:"8px"},children:"AI-Powered Insights"}),(0,b.jsx)("p",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"Get personalized trading improvements based on your data"})]}),p&&(0,b.jsxs)("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(220, 38, 38, 0.1)",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"8px",display:"flex",alignItems:"center",gap:"12px",color:"var(--loss-color)"},role:"alert",children:[(0,b.jsx)(f.FiAlertCircle,{size:20}),(0,b.jsx)("span",{style:{fontSize:"14px"},children:p})]}),n?(0,b.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--text-secondary)"},children:[(0,b.jsx)("div",{style:{fontSize:"14px",marginBottom:"16px"},children:"Analyzing your trading data..."}),(0,b.jsx)("div",{style:{width:"40px",height:"40px",border:"2px solid var(--purple-base)",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}})]}):l.length>0?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"16px",marginBottom:"32px"},children:l.map((a,c)=>{let d=a.icon,e=(()=>{switch(a.type){case"warning":return{bg:"rgba(217, 119, 6, 0.1)",border:"rgba(217, 119, 6, 0.3)"};case"strength":return{bg:"rgba(34, 197, 94, 0.1)",border:"rgba(34, 197, 94, 0.3)"};case"improvement":return{bg:"rgba(59, 130, 246, 0.1)",border:"rgba(59, 130, 246, 0.3)"};default:return{bg:"rgba(139, 92, 246, 0.1)",border:"rgba(139, 92, 246, 0.3)"}}})();return(0,b.jsxs)("div",{style:{backgroundColor:e.bg,border:`1px solid ${e.border}`,borderRadius:"12px",padding:"20px",display:"flex",flexDirection:"column",gap:"12px"},children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,b.jsx)("div",{style:{backgroundColor:"var(--card-bg)",padding:"8px",borderRadius:"8px",display:"flex",alignItems:"center"},children:(0,b.jsx)(d,{size:20,style:{color:(()=>{switch(a.type){case"warning":return"#d97706";case"strength":return"#22c55e";case"improvement":return"#3b82f6";default:return"#a855f7"}})()}})}),(0,b.jsx)("h3",{style:{fontSize:"15px",fontWeight:"600",color:"var(--text-primary)",margin:0},children:a.title})]}),(0,b.jsx)("p",{style:{fontSize:"13px",color:"var(--text-secondary)",margin:0},children:a.description})]},c)})})}):0===j.length?(0,b.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px",backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",color:"var(--text-secondary)"},children:[(0,b.jsx)("p",{style:{fontSize:"16px",marginBottom:"8px",margin:0},children:"No trades available"}),(0,b.jsx)("p",{style:{fontSize:"13px",margin:0},children:"Add some trades to your journal to get AI-powered insights"})]}):(0,b.jsx)("div",{style:{textAlign:"center",padding:"60px 20px",backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",color:"var(--text-secondary)"},children:(0,b.jsx)("p",{style:{fontSize:"16px",margin:0},children:"Not enough data for insights yet"})}),j.length>0&&l.length>0&&(0,b.jsxs)("div",{style:{marginTop:"32px",backgroundColor:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"24px"},children:[(0,b.jsx)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"20px",margin:0},children:"Trading Summary"}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:[(0,b.jsxs)("div",{style:{backgroundColor:"var(--panel-muted)",padding:"16px",borderRadius:"8px"},children:[(0,b.jsx)("p",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"8px",margin:0},children:"Total Trades"}),(0,b.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text-primary)",margin:0},children:j.length})]}),(0,b.jsxs)("div",{style:{backgroundColor:"var(--panel-muted)",padding:"16px",borderRadius:"8px"},children:[(0,b.jsx)("p",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"8px",margin:0},children:"Win Rate"}),(0,b.jsxs)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#22c55e",margin:0},children:[j.length>0?Math.round(j.filter(a=>"WIN"===a.outcome).length/j.length*100):0,"%"]})]}),(0,b.jsxs)("div",{style:{backgroundColor:"var(--panel-muted)",padding:"16px",borderRadius:"8px"},children:[(0,b.jsx)("p",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"8px",margin:0},children:"Total P&L"}),(0,b.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:j.reduce((a,b)=>a+(b.profitLoss||0),0)>=0?"#22c55e":"#ef4444",margin:0},children:(j.reduce((a,b)=>a+(b.profitLoss||0),0)||0).toFixed(2)})]}),(0,b.jsxs)("div",{style:{backgroundColor:"var(--panel-muted)",padding:"16px",borderRadius:"8px"},children:[(0,b.jsx)("p",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"8px",margin:0},children:"Avg Quality"}),(0,b.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"#fbbf24",margin:0},children:j.filter(a=>a.setupQuality).length>0?(j.filter(a=>a.setupQuality).reduce((a,b)=>a+(b.setupQuality||0),0)/j.filter(a=>a.setupQuality).length).toFixed(1):"N/A"})]})]})]})]}),(0,b.jsx)(e.Toaster,{position:"bottom-right"})]}):(0,b.jsx)("div",{style:{minHeight:"100vh",backgroundColor:"var(--background)"}})}a.s(["default",()=>g])}];

//# sourceMappingURL=src_app_insights_page_tsx_06df0699._.js.map