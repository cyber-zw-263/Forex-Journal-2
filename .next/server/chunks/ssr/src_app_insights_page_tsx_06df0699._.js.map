{"version":3,"sources":["../../../../src/app/insights/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport DashboardHeader from '@/components/DashboardHeader';\r\nimport { useTheme } from '@/context/ThemeContext';\r\nimport { Toaster } from 'react-hot-toast';\r\nimport { FiTrendingUp, FiAlertCircle, FiTarget, FiZap } from 'react-icons/fi';\r\nimport AnimatedCard from '@/components/AnimatedCard';\r\n\r\ninterface Trade {\r\n  id: string;\r\n  pair: string;\r\n  direction: string;\r\n  entryTime: string;\r\n  outcome?: string;\r\n  profitLoss?: number;\r\n  emotionalState?: string;\r\n  strategy?: string;\r\n  mistakes?: string;\r\n  setupQuality?: number;\r\n}\r\n\r\ninterface Insight {\r\n  type: 'pattern' | 'improvement' | 'strength' | 'warning';\r\n  title: string;\r\n  description: string;\r\n  icon: typeof FiTrendingUp;\r\n  color: string;\r\n}\r\n\r\nexport default function InsightsPage() {\r\n  const { theme, toggleTheme } = useTheme();\r\n  const [mounted, setMounted] = useState(() => typeof window !== 'undefined');\r\n  const [trades, setTrades] = useState<Trade[]>([]);\r\n  const [insights, setInsights] = useState<Insight[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!mounted) return;\r\n\r\n    const fetchTrades = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        setError(null);\r\n        const response = await fetch('/api/trades', {\r\n          headers: {\r\n            'x-user-id': 'demo-user',\r\n          },\r\n        });\r\n\r\n        if (!response.ok) {\r\n          let errBody: unknown = null;\r\n          try { errBody = await response.json(); } catch (e) { errBody = await response.text(); }\r\n          console.error('Failed to fetch trades:', response.status, errBody);\r\n          setError('Failed to load trades data');\r\n          setTrades([]);\r\n          return;\r\n        }\r\n\r\n        const responseData = await response.json();\r\n\r\n        // Handle API response format\r\n        let data;\r\n        if (responseData && typeof responseData === 'object' && 'data' in responseData) {\r\n          // API response format: { success: true, data: [...], pagination: {...} }\r\n          data = responseData.data;\r\n        } else {\r\n          // Fallback for direct array response\r\n          data = responseData;\r\n        }\r\n\r\n        if (!Array.isArray(data)) {\r\n          console.warn('Unexpected trades payload in insights page', data);\r\n          setError('Invalid trades data format');\r\n          setTrades([]);\r\n          return;\r\n        }\r\n\r\n        setTrades(data);\r\n      } catch (error) {\r\n        console.error('Error fetching trades:', error);\r\n        setError('An error occurred while loading trades');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchTrades();\r\n  }, [mounted]);\r\n\r\n  // Generate AI insights\r\n  useEffect(() => {\r\n    if (trades.length === 0) return;\r\n\r\n    const generatedInsights: Insight[] = [];\r\n\r\n    // Best performing pairs\r\n    const pairStats: { [key: string]: { wins: number; losses: number; pnl: number } } = {};\r\n    trades.forEach(trade => {\r\n      if (!pairStats[trade.pair]) {\r\n        pairStats[trade.pair] = { wins: 0, losses: 0, pnl: 0 };\r\n      }\r\n      if (trade.outcome === 'WIN') pairStats[trade.pair].wins++;\r\n      if (trade.outcome === 'LOSS') pairStats[trade.pair].losses++;\r\n      pairStats[trade.pair].pnl += trade.profitLoss || 0;\r\n    });\r\n\r\n    const bestPair = Object.entries(pairStats).sort((a, b) => b[1].wins - a[1].wins)[0];\r\n    if (bestPair) {\r\n      generatedInsights.push({\r\n        type: 'strength',\r\n        title: `${bestPair[0]} is your best pair`,\r\n        description: `You have a ${Math.round((bestPair[1].wins / (bestPair[1].wins + bestPair[1].losses)) * 100)}% win rate on ${bestPair[0]}. Consider trading it more often.`,\r\n        icon: FiTrendingUp,\r\n        color: 'text-green-600 dark:text-green-400',\r\n      });\r\n    }\r\n\r\n    // Emotional state analysis\r\n    const emotionalTrades = trades.filter(t => t.emotionalState);\r\n    if (emotionalTrades.length > 0) {\r\n      const emotionalStats: { [key: string]: { wins: number; losses: number } } = {};\r\n      emotionalTrades.forEach(trade => {\r\n        if (!emotionalStats[trade.emotionalState || '']) {\r\n          emotionalStats[trade.emotionalState || ''] = { wins: 0, losses: 0 };\r\n        }\r\n        if (trade.outcome === 'WIN') emotionalStats[trade.emotionalState || ''].wins++;\r\n        else emotionalStats[trade.emotionalState || ''].losses++;\r\n      });\r\n\r\n      const bestState = Object.entries(emotionalStats).sort((a, b) => b[1].wins - a[1].wins)[0];\r\n      if (bestState) {\r\n        generatedInsights.push({\r\n          type: 'pattern',\r\n          title: `You trade best when ${bestState[0]}`,\r\n          description: `${bestState[1].wins} wins when ${bestState[0]} vs ${bestState[1].losses} losses. Remember this state for future trades.`,\r\n          icon: FiZap,\r\n          color: 'text-blue-600 dark:text-blue-400',\r\n        });\r\n      }\r\n    }\r\n\r\n    // Win rate by direction\r\n    const longs = trades.filter(t => t.direction === 'LONG');\r\n    const shorts = trades.filter(t => t.direction === 'SHORT');\r\n    const longWinRate = longs.length > 0 ? (longs.filter(t => t.outcome === 'WIN').length / longs.length) * 100 : 0;\r\n    const shortWinRate = shorts.length > 0 ? (shorts.filter(t => t.outcome === 'WIN').length / shorts.length) * 100 : 0;\r\n\r\n    if (longWinRate > shortWinRate && longWinRate > 40) {\r\n      generatedInsights.push({\r\n        type: 'improvement',\r\n        title: 'You are better at LONG trades',\r\n        description: `Long win rate: ${Math.round(longWinRate)}% vs Short: ${Math.round(shortWinRate)}%. Focus more on long setups.`,\r\n        icon: FiTarget,\r\n        color: 'text-green-600 dark:text-green-400',\r\n      });\r\n    }\r\n\r\n    // Common mistakes warning\r\n    const allMistakes = trades\r\n      .filter(t => t.mistakes)\r\n      .flatMap(t => {\r\n        try {\r\n          return t.mistakes ? JSON.parse(t.mistakes) : [];\r\n        } catch {\r\n          return [];\r\n        }\r\n      });\r\n\r\n    if (allMistakes.length > 0) {\r\n      const mistakeCount: { [key: string]: number } = {};\r\n      allMistakes.forEach(m => {\r\n        mistakeCount[m] = (mistakeCount[m] || 0) + 1;\r\n      });\r\n\r\n      const topMistake = Object.entries(mistakeCount).sort((a, b) => b[1] - a[1])[0];\r\n      if (topMistake && topMistake[1] > 1) {\r\n        generatedInsights.push({\r\n          type: 'warning',\r\n          title: `Repeated mistake: ${topMistake[0]}`,\r\n          description: `You've made this mistake ${topMistake[1]} times. Create a checklist to prevent this.`,\r\n          icon: FiAlertCircle,\r\n          color: 'text-orange-600 dark:text-orange-400',\r\n        });\r\n      }\r\n    }\r\n\r\n    // Time-based analysis\r\n    const morningTrades = trades.filter(t => {\r\n      const hour = new Date(t.entryTime).getHours();\r\n      return hour >= 8 && hour < 12;\r\n    });\r\n\r\n    if (morningTrades.length > 5) {\r\n      const morningWins = morningTrades.filter(t => t.outcome === 'WIN').length;\r\n      const morningWinRate = (morningWins / morningTrades.length) * 100;\r\n      if (morningWinRate > 60) {\r\n        generatedInsights.push({\r\n          type: 'pattern',\r\n          title: 'You trade best in the morning',\r\n          description: `Morning (8am-12pm) win rate: ${Math.round(morningWinRate)}%. Schedule more trades during this time.`,\r\n          icon: FiTrendingUp,\r\n          color: 'text-yellow-600 dark:text-yellow-400',\r\n        });\r\n      }\r\n    }\r\n\r\n    setInsights(generatedInsights);\r\n  }, [trades]);\r\n\r\n  if (!mounted) {\r\n    return <div style={{ minHeight: '100vh', backgroundColor: 'var(--background)' }} />;\r\n  }\r\n\r\n  return (\r\n    <div style={{ minHeight: '100vh', backgroundColor: 'var(--background)' }}>\r\n      <main style={{ maxWidth: '1000px', margin: '0 auto', padding: '32px 16px' }}>\r\n        {/* Header */}\r\n        <div style={{ marginBottom: '32px' }}>\r\n          <h1 style={{ fontSize: '28px', fontWeight: '700', color: 'var(--text-primary)', marginBottom: '8px' }}>\r\n            AI-Powered Insights\r\n          </h1>\r\n          <p style={{ fontSize: '14px', color: 'var(--text-secondary)' }}>\r\n            Get personalized trading improvements based on your data\r\n          </p>\r\n        </div>\r\n\r\n        {/* Error State */}\r\n        {error && (\r\n          <div\r\n            style={{\r\n              marginBottom: '24px',\r\n              padding: '16px',\r\n              backgroundColor: 'rgba(220, 38, 38, 0.1)',\r\n              border: '1px solid rgba(220, 38, 38, 0.3)',\r\n              borderRadius: '8px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '12px',\r\n              color: 'var(--loss-color)',\r\n            }}\r\n            role=\"alert\"\r\n          >\r\n            <FiAlertCircle size={20} />\r\n            <span style={{ fontSize: '14px' }}>{error}</span>\r\n          </div>\r\n        )}\r\n\r\n        {/* Loading State */}\r\n        {isLoading ? (\r\n          <div style={{ textAlign: 'center', padding: '60px 20px', color: 'var(--text-secondary)' }}>\r\n            <div style={{ fontSize: '14px', marginBottom: '16px' }}>Analyzing your trading data...</div>\r\n            <div style={{\r\n              width: '40px',\r\n              height: '40px',\r\n              border: '2px solid var(--purple-base)',\r\n              borderTop: '2px solid transparent',\r\n              borderRadius: '50%',\r\n              animation: 'spin 1s linear infinite',\r\n              margin: '0 auto',\r\n            }} />\r\n          </div>\r\n        ) : insights.length > 0 ? (\r\n          <>\r\n            {/* Insights Grid */}\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\r\n              gap: '16px',\r\n              marginBottom: '32px',\r\n            }}>\r\n              {insights.map((insight, idx) => {\r\n                const Icon = insight.icon;\r\n                const getBgColor = () => {\r\n                  switch(insight.type) {\r\n                    case 'warning':\r\n                      return { bg: 'rgba(217, 119, 6, 0.1)', border: 'rgba(217, 119, 6, 0.3)' };\r\n                    case 'strength':\r\n                      return { bg: 'rgba(34, 197, 94, 0.1)', border: 'rgba(34, 197, 94, 0.3)' };\r\n                    case 'improvement':\r\n                      return { bg: 'rgba(59, 130, 246, 0.1)', border: 'rgba(59, 130, 246, 0.3)' };\r\n                    default:\r\n                      return { bg: 'rgba(139, 92, 246, 0.1)', border: 'rgba(139, 92, 246, 0.3)' };\r\n                  }\r\n                };\r\n\r\n                const colors = getBgColor();\r\n                const getIconColor = () => {\r\n                  switch(insight.type) {\r\n                    case 'warning': return '#d97706';\r\n                    case 'strength': return '#22c55e';\r\n                    case 'improvement': return '#3b82f6';\r\n                    default: return '#a855f7';\r\n                  }\r\n                };\r\n\r\n                return (\r\n                  <div\r\n                    key={idx}\r\n                    style={{\r\n                      backgroundColor: colors.bg,\r\n                      border: `1px solid ${colors.border}`,\r\n                      borderRadius: '12px',\r\n                      padding: '20px',\r\n                      display: 'flex',\r\n                      flexDirection: 'column',\r\n                      gap: '12px',\r\n                    }}\r\n                  >\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                      <div style={{\r\n                        backgroundColor: 'var(--card-bg)',\r\n                        padding: '8px',\r\n                        borderRadius: '8px',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                      }}>\r\n                        <Icon size={20} style={{ color: getIconColor() }} />\r\n                      </div>\r\n                      <h3 style={{ fontSize: '15px', fontWeight: '600', color: 'var(--text-primary)', margin: 0 }}>\r\n                        {insight.title}\r\n                      </h3>\r\n                    </div>\r\n                    <p style={{ fontSize: '13px', color: 'var(--text-secondary)', margin: 0 }}>\r\n                      {insight.description}\r\n                    </p>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </>\r\n        ) : trades.length === 0 ? (\r\n          <div style={{\r\n            textAlign: 'center',\r\n            padding: '60px 20px',\r\n            backgroundColor: 'var(--card-bg)',\r\n            border: '1px solid var(--card-border)',\r\n            borderRadius: '12px',\r\n            color: 'var(--text-secondary)',\r\n          }}>\r\n            <p style={{ fontSize: '16px', marginBottom: '8px', margin: 0 }}>No trades available</p>\r\n            <p style={{ fontSize: '13px', margin: 0 }}>Add some trades to your journal to get AI-powered insights</p>\r\n          </div>\r\n        ) : (\r\n          <div style={{\r\n            textAlign: 'center',\r\n            padding: '60px 20px',\r\n            backgroundColor: 'var(--card-bg)',\r\n            border: '1px solid var(--card-border)',\r\n            borderRadius: '12px',\r\n            color: 'var(--text-secondary)',\r\n          }}>\r\n            <p style={{ fontSize: '16px', margin: 0 }}>Not enough data for insights yet</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Weekly Summary */}\r\n        {trades.length > 0 && insights.length > 0 && (\r\n          <div style={{\r\n            marginTop: '32px',\r\n            backgroundColor: 'var(--card-bg)',\r\n            border: '1px solid var(--card-border)',\r\n            borderRadius: '12px',\r\n            padding: '24px',\r\n          }}>\r\n            <h2 style={{ fontSize: '16px', fontWeight: '600', color: 'var(--text-primary)', marginBottom: '20px', margin: 0 }}>\r\n              Trading Summary\r\n            </h2>\r\n\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\r\n              gap: '16px',\r\n            }}>\r\n              <div style={{ backgroundColor: 'var(--panel-muted)', padding: '16px', borderRadius: '8px' }}>\r\n                <p style={{ fontSize: '12px', color: 'var(--text-secondary)', marginBottom: '8px', margin: 0 }}>Total Trades</p>\r\n                <p style={{ fontSize: '24px', fontWeight: '700', color: 'var(--text-primary)', margin: 0 }}>{trades.length}</p>\r\n              </div>\r\n              <div style={{ backgroundColor: 'var(--panel-muted)', padding: '16px', borderRadius: '8px' }}>\r\n                <p style={{ fontSize: '12px', color: 'var(--text-secondary)', marginBottom: '8px', margin: 0 }}>Win Rate</p>\r\n                <p style={{ fontSize: '24px', fontWeight: '700', color: '#22c55e', margin: 0 }}>\r\n                  {trades.length > 0\r\n                    ? Math.round(((trades.filter(t => t.outcome === 'WIN').length / trades.length) * 100))\r\n                    : 0}%\r\n                </p>\r\n              </div>\r\n              <div style={{ backgroundColor: 'var(--panel-muted)', padding: '16px', borderRadius: '8px' }}>\r\n                <p style={{ fontSize: '12px', color: 'var(--text-secondary)', marginBottom: '8px', margin: 0 }}>Total P&L</p>\r\n                <p style={{\r\n                  fontSize: '24px',\r\n                  fontWeight: '700',\r\n                  color: trades.reduce((sum, t) => sum + (t.profitLoss || 0), 0) >= 0 ? '#22c55e' : '#ef4444',\r\n                  margin: 0,\r\n                }}>\r\n                  {(trades.reduce((sum, t) => sum + (t.profitLoss || 0), 0) || 0).toFixed(2)}\r\n                </p>\r\n              </div>\r\n              <div style={{ backgroundColor: 'var(--panel-muted)', padding: '16px', borderRadius: '8px' }}>\r\n                <p style={{ fontSize: '12px', color: 'var(--text-secondary)', marginBottom: '8px', margin: 0 }}>Avg Quality</p>\r\n                <p style={{ fontSize: '24px', fontWeight: '700', color: '#fbbf24', margin: 0 }}>\r\n                  {trades.filter(t => t.setupQuality).length > 0\r\n                    ? (\r\n                        trades\r\n                          .filter(t => t.setupQuality)\r\n                          .reduce((sum, t) => sum + (t.setupQuality || 0), 0) /\r\n                        trades.filter(t => t.setupQuality).length\r\n                      ).toFixed(1)\r\n                    : 'N/A'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </main>\r\n\r\n      <Toaster position=\"bottom-right\" />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}